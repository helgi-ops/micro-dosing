<!DOCTYPE html>
<html lang="is">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Program Generator</title>
  <style>
    :root {
      --bg: #0b1021;
      --panel: #141a2f;
      --card: #1a2035;
      --muted: #9fb3c8;
      --text: #e7edff;
      --accent: #7c8cff;
      --accent-2: #4fd1c5;
      --border: #2a3553;
      --shadow: 0 12px 32px rgba(0,0,0,0.35);
      --radius: 14px;
    }
    * { box-sizing: border-box; }
    body {
      font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
      margin: 0;
      padding: 2rem;
      min-height: 100vh;
      line-height: 1.6;
      color: var(--text);
      background: radial-gradient(circle at 20% 20%, rgba(124,140,255,0.08), transparent 25%),
                  radial-gradient(circle at 80% 0%, rgba(79,209,197,0.08), transparent 25%),
                  var(--bg);
    }
    h1, h2, h3 {
      margin-bottom: 0.4rem;
      letter-spacing: 0.01em;
    }
    h1 { font-size: 1.8rem; }
    h2 { font-size: 1.3rem; }
    section {
      margin-top: 1.2rem;
      padding: 1.25rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(145deg, rgba(26,32,53,0.95), rgba(20,26,47,0.95));
      box-shadow: var(--shadow);
    }
    ul { padding-left: 1.2rem; }
    .program-block {
      background: linear-gradient(145deg, rgba(32,40,68,0.95), rgba(25,32,56,0.9));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 0.95rem;
      margin-top: 0.5rem;
      box-shadow: var(--shadow);
    }
    .two-col {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 1rem;
    }
    .stack { display: grid; gap: 0.75rem; }
    label {
      display: block;
      margin-bottom: 0.4rem;
      color: var(--muted);
      font-weight: 600;
      letter-spacing: 0.01em;
    }
    input, select, textarea {
      width: 100%;
      padding: 0.65rem 0.75rem;
      margin-top: 0.35rem;
      border: 1px solid var(--border);
      border-radius: 10px;
      font-size: 1rem;
      color: var(--text);
      background: #0f1528;
      outline: none;
      transition: border 0.2s, box-shadow 0.2s;
    }
    input:focus, select:focus, textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(124,140,255,0.2);
    }
    button {
      padding: 0.75rem 1.25rem;
      border: 1px solid transparent;
      border-radius: 12px;
      background: linear-gradient(120deg, var(--accent), var(--accent-2));
      color: #0c1224;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 700;
      letter-spacing: 0.01em;
      box-shadow: var(--shadow);
      transition: transform 0.1s ease, box-shadow 0.2s ease;
    }
    button:hover { transform: translateY(-1px); box-shadow: 0 10px 25px rgba(124,140,255,0.25); }
    button:active { transform: translateY(0); }
    .hidden { display: none; }
    .exercise-list ul { margin: 0.4rem 0 0 0; }
    .print-only { display: none; }
    .microdose-panel {
      margin-top: 1.2rem;
      padding: 1rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(145deg, rgba(32,40,68,0.95), rgba(20,26,47,0.95));
      box-shadow: var(--shadow);
    }
    .microdose-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 0.75rem;
      align-items: end;
    }
    .microdose-output {
      margin-top: 0.75rem;
      padding: 0.85rem;
      border-radius: 10px;
      border: 1px dashed var(--border);
      background: rgba(124,140,255,0.07);
    }
    .tag {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      border-radius: 999px;
      font-size: 0.85rem;
      font-weight: 700;
      letter-spacing: 0.01em;
      background: rgba(124,140,255,0.2);
      color: var(--text);
    }
    .week-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 0.65rem;
    }
    .week-card {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 0.65rem;
      background: rgba(15,21,40,0.9);
      box-shadow: var(--shadow);
    }
    .week-results {
      margin-top: 0.75rem;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 0.5rem;
    }
    .week-day {
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 0.6rem;
      background: rgba(32,40,68,0.9);
      cursor: pointer;
      transition: transform 0.1s ease, box-shadow 0.2s ease;
    }
    .week-day:hover { transform: translateY(-1px); box-shadow: 0 10px 25px rgba(124,140,255,0.25); }
    .app-hero {
      margin-bottom: 1.5rem;
      padding: 1.4rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(145deg, rgba(26,32,53,0.95), rgba(16,22,40,0.95));
      box-shadow: var(--shadow);
    }
    .app-hero h1 { margin: 0.1rem 0; font-size: 2rem; }
    .app-hero .subtitle { margin: 0.25rem 0 0.6rem; color: var(--muted); }
    .eyebrow {
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-size: 0.85rem;
      color: var(--accent-2);
      margin: 0;
    }
    .status-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
      margin-top: 0.35rem;
    }
    .status-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.4rem 0.7rem;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(124,140,255,0.12);
      color: var(--text);
      font-weight: 700;
      font-size: 0.95rem;
    }
    .panel-card {
      background: linear-gradient(145deg, rgba(26,32,53,0.95), rgba(20,26,47,0.95));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.1rem;
      box-shadow: var(--shadow);
    }
    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 0.75rem;
      margin-bottom: 0.65rem;
    }
    .panel-header h2,
    .panel-header h3 { margin: 0; }
    .panel-header p { margin: 0.15rem 0 0; color: var(--muted); }
    .microdose-shell {
      margin-top: 1.2rem;
      display: grid;
      gap: 1rem;
      padding: 0;
      border: none;
      background: transparent;
      box-shadow: none;
    }
    .app {
      display: grid;
      gap: 1rem;
    }
    .panel {
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(145deg, rgba(26,32,53,0.95), rgba(20,26,47,0.95));
      box-shadow: var(--shadow);
      padding: 1.1rem;
    }
    .microdose-layout {
      display: grid;
      grid-template-columns: minmax(320px, 360px) 1fr;
      gap: 1rem;
      align-items: start;
    }
    .settings-stack { display: grid; gap: 0.85rem; }
    .week-cards {
      background: rgba(15,21,40,0.8);
      border: 1px dashed var(--border);
      border-radius: var(--radius);
      padding: 0.85rem;
      min-height: 180px;
    }
    .day-panel {
      margin-top: 0.25rem;
    }
    .hint {
      font-size: 0.9rem;
      color: var(--muted);
      margin: 0.15rem 0 0;
    }
    .inline-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
    }
    .generator-frame {
      margin-top: 0.75rem;
      border: 1px dashed var(--border);
      border-radius: var(--radius);
      background: rgba(15,21,40,0.8);
      padding: 0.5rem;
    }
    .generator-frame iframe {
      width: 100%;
      min-height: 520px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: #0f1528;
    }
    .empty-state {
      color: var(--muted);
      font-size: 0.95rem;
      padding: 0.5rem 0;
    }
    @media (max-width: 960px) {
      .microdose-layout { grid-template-columns: 1fr; }
    }
    .traffic-green { color: #55efc4; }
    .traffic-yellow { color: #f6d860; }
    .traffic-red { color: #ff7b7b; }
    table.program-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.5rem;
      background: #0f1528;
      border: 1px solid var(--border);
      border-radius: 10px;
      overflow: hidden;
    }
    table.program-table th,
    table.program-table td {
      border: 1px solid var(--border);
      padding: 0.5rem 0.6rem;
      font-size: 0.95rem;
      color: var(--text);
      white-space: normal;
      word-break: break-word;
      line-height: 1.25;
    }
    table.program-table th {
      background: rgba(124,140,255,0.1);
      text-align: left;
      font-weight: 700;
    }
    table.program-table th:first-child,
    table.program-table td:first-child {
      width: 60px;
      max-width: 60px;
      text-align: center;
    }
    table.program-table th:nth-child(2),
    table.program-table td:nth-child(2) {
      min-width: 120px;
      width: 120px;
      max-width: 140px;
    }
    table.program-table th:nth-child(3),
    table.program-table td:nth-child(3) {
      min-width: 240px;
      width: 30%;
    }
    table.program-table th:nth-child(4),
    table.program-table td:nth-child(4),
    table.program-table th:nth-child(5),
    table.program-table td:nth-child(5) {
      width: 90px;
      max-width: 95px;
    }
    /* Make Hybrid rest columns fill the row on print and screen */
    [data-program^="hybrid"] table.program-table {
      table-layout: fixed;
    }
    [data-program^="hybrid"] table.program-table th,
    [data-program^="hybrid"] table.program-table td {
      word-wrap: break-word;
      white-space: normal;
    }
    [data-program^="hybrid"] table.program-table th:nth-child(1),
    [data-program^="hybrid"] table.program-table td:nth-child(1) { width: 8%; }
    [data-program^="hybrid"] table.program-table th:nth-child(2),
    [data-program^="hybrid"] table.program-table td:nth-child(2) { width: 14%; }
    [data-program^="hybrid"] table.program-table th:nth-child(3),
    [data-program^="hybrid"] table.program-table td:nth-child(3) { width: 26%; }
    [data-program^="hybrid"] table.program-table th:nth-child(4),
    [data-program^="hybrid"] table.program-table td:nth-child(4) { width: 14%; }
    [data-program^="hybrid"] table.program-table th:nth-child(5),
    [data-program^="hybrid"] table.program-table td:nth-child(5) { width: 10%; }
    [data-program^="hybrid"] table.program-table th:nth-child(6),
    [data-program^="hybrid"] table.program-table td:nth-child(6) { width: 14%; }
    [data-program^="hybrid"] table.program-table th:nth-child(7),
    [data-program^="hybrid"] table.program-table td:nth-child(7) { width: 14%; }
    @media print {
      .no-print { display: none !important; }
      body { margin: 0.5in; background: #fff; color: #000; }
      form,
      section.exercise-list,
      section[data-structure],
      section:not([data-program]):not(.print-name) { display: none !important; }
      .print-only { display: block !important; }
      @page { size: A4 landscape; margin: 0.4in; }
      table.program-table th,
      table.program-table td {
        font-size: 0.82rem;
        padding: 0.25rem 0.3rem;
        white-space: nowrap;
      }
      h1, h2, h3 { break-after: avoid; }
      section { page-break-inside: avoid; }
    }
  </style>
  <link rel="stylesheet" href="./assets/ui.css">
</head>
<body>

  <div style="position:fixed;bottom:10px;right:10px;z-index:9999;background:red;color:white;padding:6px 10px;border-radius:8px;font-weight:700;">
    INDEX LIVE
  </div>

  <div class="actions" style="display:none;"></div>

  <div class="coach-topbar no-print">
    <div class="coach-topbar__left">
      <div class="brand">
        <span class="brand-mark"></span>
        <span class="brand-text">Coach Dashboard</span>
      </div>
      <div class="field">
        <label for="teamSelect">Lið / hópur</label>
        <select id="teamSelect" aria-label="Veldu lið">
          <option>Keflavík U19</option>
          <option>Breiðablik Akademía</option>
          <option>Valur A-lið</option>
        </select>
      </div>
    </div>

    <div class="coach-topbar__mid">
      <div class="field week-field">
        <label>Vika</label>
        <div class="week-meta">
          <button type="button" class="ghost-btn" aria-label="Fyrri vika">‹</button>
          <div>
            <div class="week-title">Week 32</div>
            <div class="week-range">05.08 – 11.08</div>
          </div>
          <button type="button" class="ghost-btn" aria-label="Næsta vika">›</button>
        </div>
      </div>
      <div class="status-chip draft" aria-live="polite">Draft</div>
    </div>

    <div class="coach-topbar__actions">
      <button type="button" class="btn primary">Publish viku</button>
      <button type="button" class="btn ghost">Export</button>
      <button type="button" class="btn ghost">Settings</button>
    </div>
  </div>

  <div class="app-shell">
    <nav class="coach-sidebar no-print" aria-label="Coach navigation">
      <div class="sidebar-header">
        <span class="sidebar-title">Navigation</span>
      </div>
      <ul class="sidebar-nav">
        <li class="active"><button type="button" class="nav-item" data-panel="panel-roster"><span class="dot"></span>Roster</button></li>
        <li><button type="button" class="nav-item" data-panel="panel-weekBuilder"><span class="dot"></span>Week Builder</button></li>
        <li><button type="button" class="nav-item" data-panel="panel-rules"><span class="dot"></span>Rules Library</button></li>
        <li><button type="button" class="nav-item" data-panel="panel-monitoring"><span class="dot"></span>Monitoring</button></li>
        <li><button type="button" class="nav-item" data-panel="panel-reports"><span class="dot"></span>Reports</button></li>
        <li><button type="button" class="nav-item" data-panel="panel-admin"><span class="dot"></span>Admin</button></li>
      </ul>
    </nav>

    <div class="app">
    <div id="supabaseHooks"></div>

    <header class="app-hero no-print panel app-panel" id="panel-hero" hidden>
      <div class="app-hero__inner">
        <p class="eyebrow">Microdosing Coach</p>
        <h1>Örskömmtun í þjálfun</h1>
        <p class="subtitle">Skipuleggðu vikur með örskömmtun: exposure, álag og residuals á einum stað.</p>
        <div class="status-row">
          <span class="status-pill">Vikuplan tilbúið</span>
          <span class="status-pill">Smelltu á dag til að sjá dagspjald</span>
        </div>
      </div>
    </header>

    <section class="panel week-builder-panel no-print app-panel" id="panel-weekBuilder" hidden>
      <div class="panel-head">
        <div>
          <p class="eyebrow">Week Builder</p>
          <h2>Week Frame — Team Default</h2>
          <p class="muted">Skilgreindu dagategundir, álag og residual defaults fyrir vikuna.</p>
        </div>
        <div class="builder-actions">
          <div class="status-chip draft">Draft</div>
          <button type="button" class="btn primary">Publish</button>
        </div>
      </div>

      <div class="builder-meta">
        <div class="meta-block">
          <span class="label">Vika</span>
          <strong>Week 32</strong>
          <div class="sub">05.08 – 11.08</div>
        </div>
        <div class="meta-block">
          <span class="label">Útgáfa</span>
          <strong>v1 (draft)</strong>
          <div class="sub">Breytingar vistaðar: –</div>
        </div>
        <div class="meta-block">
          <span class="label">Reglur</span>
          <strong>Micro-dose rules</strong>
          <div class="sub">Applies to: non-published weeks</div>
        </div>
      </div>

      <div class="week-builder-grid">
        <div class="wb-card">
          <div class="wb-day">Mán</div>
          <label>Day type
            <select>
              <option>Æfing</option><option>Leikur</option><option>Frí</option><option>Ferð</option><option>Endurheimt</option>
            </select>
          </label>
          <label>Load / Exposure
            <div class="wb-row">
              <select>
                <option>Low</option><option selected>Moderate</option><option>High</option>
              </select>
              <select>
                <option>Low</option><option>Moderate</option><option>High</option>
              </select>
            </div>
          </label>
          <div class="wb-tag">Residuals: S 6d / P 4d / Plyo 3d</div>
        </div>
        <div class="wb-card">
          <div class="wb-day">Þri</div>
          <label>Day type
            <select>
              <option>Æfing</option><option>Leikur</option><option>Frí</option><option>Ferð</option><option>Endurheimt</option>
            </select>
          </label>
          <label>Load / Exposure
            <div class="wb-row">
              <select>
                <option>Low</option><option selected>Moderate</option><option>High</option>
              </select>
              <select>
                <option>Low</option><option>Moderate</option><option>High</option>
              </select>
            </div>
          </label>
          <div class="wb-tag">Residuals: S 6d / P 4d / Plyo 3d</div>
        </div>
        <div class="wb-card">
          <div class="wb-day">Mið</div>
          <label>Day type
            <select>
              <option>Æfing</option><option>Leikur</option><option>Frí</option><option>Ferð</option><option>Endurheimt</option>
            </select>
          </label>
          <label>Load / Exposure
            <div class="wb-row">
              <select>
                <option>Low</option><option>Moderate</option><option selected>High</option>
              </select>
              <select>
                <option>Low</option><option selected>Moderate</option><option>High</option>
              </select>
            </div>
          </label>
          <div class="wb-tag">Residuals: S 6d / P 4d / Plyo 3d</div>
        </div>
        <div class="wb-card">
          <div class="wb-day">Fim</div>
          <label>Day type
            <select>
              <option>Æfing</option><option>Leikur</option><option>Frí</option><option>Ferð</option><option>Endurheimt</option>
            </select>
          </label>
          <label>Load / Exposure
            <div class="wb-row">
              <select>
                <option>Low</option><option selected>Moderate</option><option>High</option>
              </select>
              <select>
                <option>Low</option><option>Moderate</option><option selected>High</option>
              </select>
            </div>
          </label>
          <div class="wb-tag">Residuals: S 6d / P 4d / Plyo 3d</div>
        </div>
        <div class="wb-card">
          <div class="wb-day">Fös</div>
          <label>Day type
            <select>
              <option>Æfing</option><option>Leikur</option><option>Frí</option><option>Ferð</option><option>Endurheimt</option>
            </select>
          </label>
          <label>Load / Exposure
            <div class="wb-row">
              <select>
                <option>Low</option><option>Moderate</option><option>High</option>
              </select>
              <select>
                <option>Low</option><option>Moderate</option><option>High</option>
              </select>
            </div>
          </label>
          <div class="wb-tag">Residuals: S 6d / P 4d / Plyo 3d</div>
        </div>
        <div class="wb-card">
          <div class="wb-day">Lau</div>
          <label>Day type
            <select>
              <option>Æfing</option><option>Leikur</option><option>Frí</option><option>Ferð</option><option>Endurheimt</option>
            </select>
          </label>
          <label>Load / Exposure
            <div class="wb-row">
              <select>
                <option>Low</option><option>Moderate</option><option>High</option>
              </select>
              <select>
                <option>Low</option><option>Moderate</option><option>High</option>
              </select>
            </div>
          </label>
          <div class="wb-tag">Residuals: S 6d / P 4d / Plyo 3d</div>
        </div>
        <div class="wb-card">
          <div class="wb-day">Sun</div>
          <label>Day type
            <select>
              <option>Æfing</option><option>Leikur</option><option>Frí</option><option>Ferð</option><option>Endurheimt</option>
            </select>
          </label>
          <label>Load / Exposure
            <div class="wb-row">
              <select>
                <option>Low</option><option>Moderate</option><option>High</option>
              </select>
              <select>
                <option>Low</option><option>Moderate</option><option>High</option>
              </select>
            </div>
          </label>
          <div class="wb-tag">Residuals: S 6d / P 4d / Plyo 3d</div>
        </div>
      </div>

      <div class="week-builder-meta">
        <div class="meta-card">
          <h4>Residual defaults</h4>
          <div class="residual-grid">
            <label>Strength (days)
              <input type="number" min="0" max="21" value="6">
            </label>
            <label>Power (days)
              <input type="number" min="0" max="14" value="4">
            </label>
            <label>Plyo (days)
              <input type="number" min="0" max="10" value="3">
            </label>
          </div>
          <p class="muted small">Notað sem grunn-gildi fyrir auto-regulation og leyfileg áreiti.</p>
        </div>
        <div class="meta-card">
          <h4>Athlete overrides</h4>
          <p class="muted small">Sýnilegt þegar leikmaður er valinn. Dagstegund, minutes cap, no plyo / no heavy, upper/lower only.</p>
        </div>
        <div class="meta-card">
          <h4>Validation &amp; guardrails</h4>
          <ul class="muted small">
            <li>Allir dagar þurfa Day Type + Load.</li>
            <li>Exposure þarf ef leikur er til staðar.</li>
            <li>Published vikur eru read-only (útgáfa vN fyrir breytingar).</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="panel monitoring-panel no-print app-panel" id="panel-monitoring" hidden>
      <div class="panel-head">
        <div>
          <p class="eyebrow">Monitoring</p>
          <h2>Dagleg yfirlit – Leikmenn</h2>
          <p class="muted">Rauntíma stöðugreining: readiness, soreness, svefn, plan-status og flags.</p>
        </div>
        <div class="monitoring-filters">
          <select>
            <option>All status</option>
            <option>Green</option>
            <option>Yellow</option>
            <option>Red</option>
          </select>
          <select>
            <option>Sort: Alphabetical</option>
            <option>Sort: Worst first</option>
            <option>Sort: Missing plan</option>
          </select>
        </div>
      </div>

      <div class="monitoring-table">
        <div class="mon-row mon-head">
          <div>Leikmaður</div>
          <div>Readiness</div>
          <div>Soreness</div>
          <div>Sleep</div>
          <div>Plan today?</div>
          <div>Flag</div>
          <div>Aðgerðir</div>
        </div>

        <div class="mon-row">
          <div class="mon-player">
            <span class="status-light green"></span>
            <div>
              <strong>Helgi Jónsson</strong>
              <div class="muted small">Forward</div>
            </div>
          </div>
          <div><span class="pill pill-green">7</span></div>
          <div><span class="pill pill-yellow">2</span></div>
          <div><span class="pill pill-green">1</span></div>
          <div><span class="pill pill-green ghost">Yes</span></div>
          <div><span class="pill pill-green">Green</span></div>
          <div class="mon-actions">
            <button type="button" class="ghost-btn small-btn">Nudge</button>
            <button type="button" class="ghost-btn small-btn">Override</button>
            <button type="button" class="ghost-btn small-btn">Mark done</button>
          </div>
        </div>

        <div class="mon-row">
          <div class="mon-player">
            <span class="status-light yellow"></span>
            <div>
              <strong>Sara Björk</strong>
              <div class="muted small">Midfielder</div>
            </div>
          </div>
          <div><span class="pill pill-yellow">5</span></div>
          <div><span class="pill pill-yellow">2</span></div>
          <div><span class="pill pill-red">2</span></div>
          <div><span class="pill pill-red ghost">No</span></div>
          <div><span class="pill pill-yellow">Yellow</span></div>
          <div class="mon-actions">
            <button type="button" class="ghost-btn small-btn">Nudge</button>
            <button type="button" class="ghost-btn small-btn">Override</button>
            <button type="button" class="ghost-btn small-btn">Mark done</button>
          </div>
        </div>

        <div class="mon-row">
          <div class="mon-player">
            <span class="status-light red"></span>
            <div>
              <strong>Aron Pálmi</strong>
              <div class="muted small">Defender</div>
            </div>
          </div>
          <div><span class="pill pill-red">3</span></div>
          <div><span class="pill pill-red">3</span></div>
          <div><span class="pill pill-yellow">1</span></div>
          <div><span class="pill pill-red ghost">No</span></div>
          <div><span class="pill pill-red">Red</span></div>
          <div class="mon-actions">
            <button type="button" class="ghost-btn small-btn">Nudge</button>
            <button type="button" class="ghost-btn small-btn">Override</button>
            <button type="button" class="ghost-btn small-btn">Mark done</button>
          </div>
        </div>
      </div>
    </section>

    <div id="athleteDetailPanel" hidden>
      <aside class="athlete-drawer no-print" aria-label="Athlete detail drawer">
        <div class="drawer-head">
          <div>
            <p class="eyebrow">Athlete detail</p>
            <h3>Helgi Jónsson</h3>
            <p class="muted small">Forward · Green status</p>
          </div>
          <div class="drawer-actions">
            <span class="status-light green"></span>
            <button type="button" class="ghost-btn">✕</button>
          </div>
        </div>

        <div class="drawer-tabs">
          <button class="active" type="button">This Week</button>
          <button type="button">Check-ins</button>
          <button type="button">Generated Plans</button>
          <button type="button">Restrictions</button>
        </div>

        <div class="drawer-section">
          <p class="eyebrow">This Week</p>
          <div class="mini-week-grid">
            <div class="mini-day">
              <strong>Mán</strong>
              <div>Æfing · Moderate</div>
              <div class="mini-tag">MD-1</div>
            </div>
            <div class="mini-day">
              <strong>Þri</strong>
              <div>Leikur · High</div>
              <div class="mini-tag">Game</div>
            </div>
            <div class="mini-day">
              <strong>Mið</strong>
              <div>Endurheimt · Low</div>
              <div class="mini-tag">MD+1</div>
            </div>
            <div class="mini-day">
              <strong>Fim</strong>
              <div>Æfing · Moderate</div>
              <div class="mini-tag muted">Override</div>
            </div>
            <div class="mini-day">
              <strong>Fös</strong>
              <div>Æfing · Moderate</div>
            </div>
            <div class="mini-day">
              <strong>Lau</strong>
              <div>Frí · Low</div>
            </div>
            <div class="mini-day">
              <strong>Sun</strong>
              <div>Æfing · Moderate</div>
            </div>
          </div>
          <label class="coach-notes">Coach notes
            <textarea rows="3" placeholder="Áherslur vikunnar, takmarkanir eða leiðbeiningar."></textarea>
          </label>
        </div>

        <div class="drawer-section">
          <p class="eyebrow">Check-ins (last 7–14 days)</p>
          <div class="checkin-row">
            <div>12.08 · Readiness 7 · Soreness 1 · Sleep 1</div>
            <span class="status-light green"></span>
          </div>
          <div class="checkin-row">
            <div>11.08 · Readiness 5 · Soreness 2 · Sleep 2</div>
            <span class="status-light yellow"></span>
          </div>
          <div class="checkin-row">
            <div>10.08 · Readiness 3 · Soreness 3 · Sleep 2</div>
            <span class="status-light red"></span>
          </div>
        </div>

        <div class="drawer-section">
          <p class="eyebrow">Generated Plans</p>
          <ul class="plan-list">
            <li>
              <div>12.08 · Primer · 12 mín</div>
              <button type="button" class="ghost-btn small-btn">View</button>
            </li>
            <li>
              <div>11.08 · Maintenance · 16 mín</div>
              <button type="button" class="ghost-btn small-btn">View</button>
            </li>
          </ul>
        </div>

        <div class="drawer-section">
          <p class="eyebrow">Restrictions</p>
          <div class="chip-row">
            <span class="chip">No plyo</span>
            <span class="chip">Upper-only</span>
            <span class="chip">No overhead</span>
          </div>
          <label class="coach-notes">Athugasemd
            <textarea rows="2" placeholder="Ástæða, endurskoðunardagur o.s.frv."></textarea>
          </label>
        </div>
      </aside>
    </div>

    <section class="panel reports-panel no-print app-panel" id="panel-reports" hidden>
      <div class="panel-head">
        <div>
          <p class="eyebrow">Reports</p>
          <h2>Söguleg samantekt</h2>
          <p class="muted">Byggt á published vikum, kláruðum plönum og skráðum check-ins.</p>
        </div>
        <div class="reports-filters">
          <select>
            <option>Week 32</option>
            <option>Week 31</option>
            <option>Weeks 28–32</option>
          </select>
          <select>
            <option>All teams</option>
            <option>Academy</option>
            <option>First team</option>
          </select>
          <select>
            <option>All players</option>
            <option>By position</option>
          </select>
        </div>
      </div>

      <div class="reports-grid">
        <div class="report-card">
          <div class="report-head">
            <div>
              <p class="eyebrow">Week Compliance</p>
              <h4>Fylgni við áætlun</h4>
            </div>
            <span class="pill pill-green">87%</span>
          </div>
          <p class="muted small">Completed micro-dose days ÷ expected days (published vika).</p>
          <div class="bar">
            <div style="width:87%;"></div>
          </div>
          <ul class="muted small">
            <li>Team: 87%</li>
            <li>Group A: 82%</li>
            <li>Top player: 95%</li>
          </ul>
        </div>

        <div class="report-card">
          <div class="report-head">
            <div>
              <p class="eyebrow">Minutes Completed</p>
              <h4>Raunálag (mín)</h4>
            </div>
            <span class="pill pill-yellow">312</span>
          </div>
          <p class="muted small">Samtala lokinna micro-dose plana. Meðaltal per dag/viku ef til.</p>
          <div class="bar">
            <div style="width:60%;"></div>
          </div>
          <ul class="muted small">
            <li>Weekly total: 312 mín</li>
            <li>Daily avg: 45 mín</li>
            <li>Completed vs planned: 90%</li>
          </ul>
        </div>

        <div class="report-card">
          <div class="report-head">
            <div>
              <p class="eyebrow">Red Days Count</p>
              <h4>Viðvörunar-dagar</h4>
            </div>
            <span class="pill pill-red">6</span>
          </div>
          <p class="muted small">Fjöldi daga þar sem derived status = Red (readiness + soreness + sleep).</p>
          <div class="bar">
            <div style="width:35%;"></div>
          </div>
          <ul class="muted small">
            <li>Team total: 6</li>
            <li>Most: 3 per player</li>
            <li>Heatmap ready (visual only)</li>
          </ul>
        </div>

        <div class="report-card">
          <div class="report-head">
            <div>
              <p class="eyebrow">Plan Types Used</p>
              <h4>Dreifing á plönum</h4>
            </div>
            <span class="pill pill-green">Mix</span>
          </div>
          <p class="muted small">Primer, Maintenance, Power, Recovery – byggt á generated plönum (published).</p>
          <div class="stacked-bar">
            <div class="seg primer" style="width:30%;">Primer</div>
            <div class="seg maint" style="width:40%;">Maint</div>
            <div class="seg power" style="width:20%;">Power</div>
            <div class="seg recov" style="width:10%;">Recovery</div>
          </div>
          <ul class="muted small">
            <li>Primer 30% · Maintenance 40% · Power 20% · Recovery 10%</li>
            <li>Sýnir raunverulega notkun kerfisins.</li>
          </ul>
        </div>
      </div>
    </section>

  <div>
  <form>
    <div class="stack">
      <div class="two-col">
        <label>
          Nafn viðskiptavinar:
          <input type="text" placeholder="Jón Jónsson" />
        </label>
      </div>

      <label>
        Veldu tilbúið program:
        <select id="daysPerWeek">
          <option value="">— Veldu fjölda —</option>
          <option value="1">1 dagur</option>
          <option value="2">2 dagar</option>
          <option value="3">3 dagar</option>
          <option value="4">4 dagar</option>
          <option value="5">5 dagar</option>
        </select>
      </label>

      <label class="hidden">
        Æfingafókus:
        <select id="focusSelect">
          <option value="">— Veldu svæði —</option>
          <option value="upper">Efri hlutinn</option>
          <option value="lower">Neðri hlutinn</option>
          <option value="core">Kjarninn</option>
        </select>
      </label>

      <div id="exerciseChecklist" class="hidden">
        <strong>Veldu æfingar:</strong>
        <div id="exerciseOptions"></div>
      </div>

      <label class="hidden">
        Veldu æfingauppsetningu:
        <select id="structureSelect">
          <option value="">— Veldu —</option>
          <option value="garcia-ramos" selected>Garcia-Ramos Cluster (15x1)</option>
          <option value="moreno">Moreno Protocol (20 reps)</option>
          <option value="hansen">Hansen Protocol (singles/doubles)</option>
        </select>
      </label>

      <label id="variantRow" class="hidden">
        Veldu útfærslu:
        <select id="variantSelect"></select>
      </label>

      <label id="programRow">
        Veldu flokk:
        <select id="programSelect">
          <option value="">— Veldu flokk —</option>
          <option value="contrast1">Contrast Training 1</option>
          <option value="french">French Contrast</option>
          <option value="contrast-lower">Contrast – Lower Focus</option>
          <option value="potentiation">Potentiation Clusters</option>
          <option value="pot-cluster">Potentiation Cluster (2/4 dagar)</option>
          <option value="french-rotational">French Contrast (Rotational)</option>
          <option value="french-4day-new">French Contrast (4 dagar – nýtt úrval)</option>
          <option value="french-iso3-pima">French Contrast (3 dagar – PIMA Iso)</option>
          <option value="contrast-velocity">Contrast + Velocity (4 dagar)</option>
          <option value="contrast-football-4day">Contrast – Football (4 dagar)</option>
          <option value="hybrid-4day">Hybrid – Work Capacity + Contrast (4 dagar)</option>
          <option value="accel-power-4day">Acceleration &amp; Power (4 dagar)</option>
          <option value="lower-3day">Lower Body – 3x í viku (rehab + styrkur)</option>
          <option value="contrast-2day">Contrast Combo (2 dagar)</option>
          <option value="contrast-custom-4day">Contrast – Custom 4 dagar</option>
          <option value="iso-contrast-3day">Iso Contrast (3 dagar)</option>
          <option value="iso-contrast-4day">Iso Contrast (4 dagar)</option>
        </select>
      </label>

    </div>

  </form>

  <section id="microdose-section" class="microdose-shell panel">
    <main class="grid">
      <section class="panel" id="settingsPanel">
        <div class="panel-header">
          <div>
            <p class="eyebrow">Stillingar</p>
            <h2>Micro-dosing – Stillingar</h2>
            <p>Leikmannaval, álag og residuals áður en þú býrð til viku.</p>
          </div>
        </div>
        <div class="settings-stack">
          <div class="two-col">
            <label>Leikmannaval
              <select id="playerSelect">
                <option value="">Veldu leikmann</option>
                <option value="Aðalleikmaður">Aðalleikmaður</option>
                <option value="Leikmaður 2">Leikmaður 2</option>
                <option value="Custom">Skrá handvirkt</option>
              </select>
            </label>
            <label>Álag (vikan)
              <select id="loadSelect">
                <option value="low">Low</option>
                <option value="moderate" selected>Moderate</option>
                <option value="high">High</option>
              </select>
            </label>
          </div>
          <div class="inline-add-player">
            <label for="newPlayerName">Bæta við leikmanni</label>
            <div class="inline-row">
              <input id="newPlayerName" type="text" placeholder="Nýr leikmaður" />
              <button type="button" id="addPlayerBtn" class="btn ghost">Bæta við</button>
            </div>
            <div class="hint small">Vistað í vafra og bætist í listann fyrir auðvelda valið.</div>
          </div>
          <label>Leikmaður / Iðkandi
            <input id="athleteName" type="text" placeholder="Nafn leikmanns" />
          </label>
          <label>Vika (t.d. dagssetning eða texti)
            <input id="weekStartInput" type="text" placeholder="Þessi vika" />
          </label>
          <div class="two-col">
            <label>Exposure síðasta leik (leikmaður)
              <select id="exposureSelect">
                <option value="high">High (spilaði mikið)</option>
                <option value="moderate">Moderate (miðlungs)</option>
                <option value="low" selected>Low/None (lítið eða ekki)</option>
              </select>
            </label>
            <div>
              <label>Residual stöður</label>
              <div class="hint" id="athleteStorageKeyHint"></div>
              <div class="hint" id="exposureStatus"></div>
            </div>
          </div>
          <div class="microdose-grid">
            <label>Dagar frá síðasta STYRK áreiti (0–21)
              <input id="residual-strength" type="number" min="0" max="21" step="1" placeholder="t.d. 8" />
            </label>
            <label>Dagar frá síðasta POWER/HRAÐA áreiti (0–21)
              <input id="residual-power" type="number" min="0" max="21" step="1" placeholder="t.d. 6" />
            </label>
            <label>Dagar frá síðasta PLYO áreiti (0–21)
              <input id="residual-plyo" type="number" min="0" max="21" step="1" placeholder="valfrjálst" />
            </label>
          </div>
          <div class="hint">Residuals vistast per leikmann (localStorage).</div>
          <div class="program-block mini" style="margin-top:8px;">
            <strong>Skilgreiningar</strong>
            <ul style="padding-left:16px; margin:6px 0 0;">
              <li><strong>Primer:</strong> Endurheimt / neural primer, 6–10 mín – engin ný þjálfun.</li>
              <li><strong>Maintenance:</strong> Viðhald/snerting með lágu magni, oft isometric bias.</li>
              <li><strong>Anchor:</strong> Aðal lota með háum gæðum (grænn dagur), forðast á gulum/rauðum.</li>
            </ul>
          </div>
        </div>
      </section>
      <section class="panel" id="resultsPanel">
        <div class="panel-head">
          <h2>Vikuplan</h2>
          <div class="pill" id="weekMeta"></div>
        </div>
        <div>
          <p class="eyebrow" style="margin-bottom:8px;">Viku/dagaval (Mán–Sun)</p>
          <div class="week-days-grid week-grid" id="microdose-week-grid"></div>
        </div>
        <div class="inline-actions" style="margin-bottom:10px;">
          <button type="button" id="microdose-week-run">Búa til vikuplan</button>
          <button type="button" id="generateWeekBtn">Uppfæra vikuplan</button>
          <button type="button" id="btnResetResiduals" style="background:#444;">Hreinsa vikuplan</button>
          <span id="residualsStatus" class="hint"></span>
        </div>
        <div class="inline-actions" style="margin-bottom:10px;">
          <button type="button" id="btnLoadLastWeek" style="background:#2b6;">Hlaða síðustu viku</button>
          <button type="button" id="btnClearLastWeek" style="background:#666;">Hreinsa síðustu viku</button>
          <span id="lastWeekStatus" class="hint"></span>
          <button id="printWeekBtn" type="button">Prenta</button>
          <button id="exportBtn" type="button">Export JSON</button>
          <button id="importBtn" type="button">Import JSON</button>
          <input id="importFile" type="file" accept="application/json" style="display:none;" />
          <button id="clearStorageBtn" type="button">Hreinsa gögn</button>
          <span id="ioStatus" class="status hint"></span>
        </div>
        <div id="microdose-week-output" class="microdose-output">
          <div class="empty-state" id="weekEmpty">
            Búðu til vikuplan til að sjá kort hér.
          </div>
          <div id="weekCards" class="week-days-grid"></div>
          <div id="weekResult"></div>
        </div>
        <div id="dayPanel" class="panel-card microdose-panel panel day-panel">
          <div class="panel-header">
            <div>
              <p class="eyebrow">Dagspjald</p>
              <h3>Áherslur dags</h3>
              <p>Uppfærðist aðeins þegar smellt er á dag.</p>
            </div>
            <span id="microdose-status" class="tag" style="display:none;" aria-live="polite"></span>
          </div>
          <div class="microdose-grid">
            <label>Dagur vikunnar:
              <select id="microdose-dagur" aria-label="Dagur" data-focus-control="day" >
                <option value="Mán">Mán</option>
                <option value="Þri">Þri</option>
                <option value="Mið">Mið</option>
                <option value="Fim">Fim</option>
                <option value="Fös">Fös</option>
                <option value="Lau">Lau</option>
                <option value="Sun">Sun</option>
              </select>
            </label>
            <label>Hvernig líður þér? (1–10):
              <input id="microdose-readiness" type="number" min="1" max="10" step="1" value="7" />
            </label>
            <label>Fókus í dag (t.d. hraði, styrkur, endurheimt):
              <input id="microdose-focus" type="text" placeholder="Hraði + líkamsstjórn" data-focus-control="text" />
            </label>
          </div>
          <div class="inline-actions" style="margin-top:0.75rem;">
            <button type="button" id="microdose-run">Búa til micro-dose plan</button>
          </div>
          <div id="microdose-output" class="microdose-output" aria-live="polite">
            <div class="empty-state">Veldu dag úr vikuplani til að sjá dagspjald.</div>
          </div>
        </div>
      </section>
    </main>
  </section>

  <section class="program-block no-print">
    <h2>Build your own program</h2>
    <div class="two-col">
      <label>
        Nafn á programi:
        <input id="builderName" type="text" placeholder="T.d. Builder Program" />
      </label>
      <label>
        Dagar:
        <select id="builderDays">
          <option value="2">2</option>
          <option value="3" selected>3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
      </label>
      <label>
        Velocity Target dálkur?
        <select id="builderVelocityColumn">
          <option value="no">No</option>
          <option value="yes">Yes</option>
        </select>
      </label>
    </div>
    <div id="builderDayConfigs" class="stack"></div>
    <div style="display:flex; justify-content:center; margin-top:0.75rem;">
      <button type="button" id="builderCreate" style="padding:0.85rem 1.6rem; font-size:1.05rem;">Búa til program</button>
    </div>
    <p id="builderStatus" style="margin:0.5rem 0 0; font-size:0.95rem;"></p>
  </section>

  <div id="builderPrograms" class="no-print"></div>

  <div class="print-only print-name">
    <strong>Nafn:</strong> <span id="printNameValue"></span>
  </div>


  <section class="exercise-list" data-focus="upper">
    <h2>Efri hlutinn – æfingar</h2>
    <div class="program-block">
      <ul>
        <li>Bench press throw / push press / landmine press</li>
        <li>Chin-up eða band-assisted pull-up</li>
        <li>1-arm dumbbell row eða chest-supported row</li>
        <li>Med ball rotational throw / scoop toss</li>
        <li>Scap push-up, face pull, band pull-apart</li>
      </ul>
    </div>
  </section>

  <section class="exercise-list" data-focus="lower">
    <h2>Neðri hlutinn – æfingar</h2>
    <div class="program-block">
      <ul>
        <li>Deadlift</li>
        <li>Trap Bar Deadlift</li>
        <li>Trap Bar Deadlift (Split Stance)</li>
        <li>Barbell Squat</li>
        <li>Barbell Bulgarian Split Squat</li>
      </ul>
    </div>
  </section>

  <section class="exercise-list" data-focus="core">
    <h2>Kjarninn – æfingar</h2>
    <div class="program-block">
      <ul>
        <li>Pallof press (miðlungs/þyngd)</li>
        <li>Half-kneeling Pallof press (anti-rotation)</li>
        <li>Pallof press walkout</li>
        <li>Dead bug eða hollow hold</li>
        <li>Dead bug með band yfir hné</li>
        <li>Birddog með stöðugleika eða bandi</li>
        <li>Low bear crawl (controlled)</li>
        <li>Side plank með reach eða lyftu</li>
        <li>Side plank row (band eða cable)</li>
        <li>Stir-the-pot á bolta</li>
        <li>Farmer’s carry eða suitcase carry</li>
        <li>Offset front rack march (KB/DB)</li>
        <li>Cable chop / lift (hátt → lágt, lágt → hátt)</li>
      </ul>
    </div>
  </section>

  <section data-structure="moreno" data-variant="moreno-4x5">
    <h2>Moreno Protocol – 4x5 @ 30s</h2>
    <p>Sustained effort með skipulagðri hvíld. Hentar þegar þú vilt meiri efnaskiptakröfu og þol undir kraftvinnu.</p>
    <div class="program-block">
      <strong>Uppsetning</strong>
      <ul>
        <li>Set: 4 micro-set x 5 reps (20 reps samtals)</li>
        <li>Hvíld innan setts: 30 sek. milli 5 rep blokkanna</li>
        <li>Heildar hvíld innan setts: ~120 sek. | Heildartími: ~135–145 sek.</li>
      </ul>
      <strong>Notkun</strong>
      <ul>
        <li>3–4 set</li>
        <li>Hvíld milli seta: 2–3 mín</li>
        <li>Áhersla: sustained effort, styrkur/hypertrophy undir hóflegri þreytu</li>
      </ul>
    </div>
  </section>

  <section data-structure="moreno" data-variant="moreno-10x2">
    <h2>Moreno Protocol – 10x2 @ 10s</h2>
    <p>Hátt gæði og hraði með mjög stuttum vinnublokkum. Hentar þegar markmiðið er power og velocity viðhald.</p>
    <div class="program-block">
      <strong>Uppsetning</strong>
      <ul>
        <li>Set: 10 micro-set x 2 reps (20 reps samtals)</li>
        <li>Hvíld innan setts: 10 sek. milli 2 rep blokkanna</li>
        <li>Heildar hvíld innan setts: ~100 sek. | Heildartími: ~130–145 sek.</li>
      </ul>
      <strong>Notkun</strong>
      <ul>
        <li>3–4 set</li>
        <li>Hvíld milli seta: 2–3 mín</li>
        <li>Áhersla: hámarks hraði/power með stöðugri PCr endurnýjun</li>
      </ul>
    </div>
  </section>

  <section data-program="push">
    <h2>Push Program</h2>
    <p>Skipting með supersetum (a/b) og velocity markmiðum.</p>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="push-body"></tbody>
    </table>

    <h3>PIMA Isometrics - Push</h3>
    <table class="program-table">
      <thead>
        <tr>
          <th>Exercise</th>
          <th>Reps &amp; TUT</th>
          <th>Sets</th>
          <th>Intensity</th>
          <th>Rest between sets</th>
          <th>Rest between reps</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Jump Shrugs</td>
          <td>3 x 3 sec holds</td>
          <td>1</td>
          <td>100%</td>
          <td>60 sec</td>
          <td>5 sec</td>
        </tr>
        <tr>
          <td>Box Step Up</td>
          <td>3 x 3 sec holds</td>
          <td>1</td>
          <td>100%</td>
          <td>60 sec</td>
          <td>5 sec</td>
        </tr>
      </tbody>
    </table>
  </section>

  <section data-program="pull">
    <h2>Pull Program</h2>
    <p>Supersets með focus á aftari keðju og grip/toga.</p>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="pull-body"></tbody>
    </table>
  </section>

  <section data-program="combo">
    <h2>Combo Push &amp; Pull Program</h2>
    <p>Blandað yfir- og undirhluta með velocity markmiðum og supersetum.</p>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="combo-body"></tbody>
    </table>
  </section>

  <section data-program="schedule4">
    <h2>Contrast Training 1 – 4 daga skipulag</h2>
    <p>Dagur 1: Push · Dagur 2: Pull · Dagur 3: Push · Dagur 4: Pull. Notar sömu Push/Pull töflur hér að neðan.</p>
  </section>

  <section data-program="scheduleFrench2">
    <h2>French Contrast – 2 daga skipulag</h2>
    <p>Dagur 1: Lower (squat) · Dagur 2: Upper (horizontal push).</p>
  </section>

  <section data-program="scheduleFrench3">
    <h2>French Contrast – 3 daga skipulag</h2>
    <p>Dagur 1: Lower (squat) · Dagur 2: Upper (push) · Dagur 3: Lower (hinge).</p>
  </section>

  <section data-program="scheduleFrench4">
    <h2>French Contrast – 4 daga skipulag</h2>
    <p>Dagur 1: Lower (squat) · Dagur 2: Upper (push) · Dagur 3: Lower (hinge) · Dagur 4: Upper (pull/throw).</p>
  </section>

  <section data-program="scheduleFrench4b">
    <h2>French Contrast – 4 daga skipulag (nýtt úrval)</h2>
    <p>Dagur 1: Lower (squat) · Dagur 2: Upper (push) · Dagur 3: Lower (hinge) · Dagur 4: Upper (pull/throw). Sama uppsetning, nýtt æfingaval.</p>
  </section>

  <section data-program="french-guidelines">
    <h3>French Contrast – hraðaviðmið</h3>
    <div class="program-block">
      <strong>Heavy Strength (A1)</strong>
      <ul>
        <li>Byrjandi: 0.90 m/s</li>
        <li>Millistig: 0.85 m/s</li>
        <li>Ítarlegt: 0.80 m/s</li>
        <li>VL%: ≤10–15%</li>
      </ul>
      <strong>Loaded Power (A3)</strong>
      <ul>
        <li>Stangir / handlóð: ≥1.10–1.30 m/s, VL% ≤5–10%</li>
        <li>Med ball / kast: maximal intent (ef mælt: ≥1.30 m/s), VL% ≤5–10%</li>
      </ul>
    </div>
  </section>

  <section data-program="scheduleContrastLower4">
    <h2>Contrast – Lower Focus (4 dagar)</h2>
    <p>Dagur 1: Single-leg squat · Dagur 2: Hinge (trap bar) · Dagur 3: Single-leg posterior · Dagur 4: Hliðar/flygju-flötur.</p>
  </section>

  <section data-program="contrast-lower-1">
    <h2>Dagur 1 – Single-Leg Squat Dominant</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="contrast-lower-1-body"></tbody>
    </table>
  </section>

  <section data-program="contrast-lower-2">
    <h2>Dagur 2 – Hinge Dominant (Trap Bar)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="contrast-lower-2-body"></tbody>
    </table>
  </section>

  <section data-program="contrast-lower-3">
    <h2>Dagur 3 – Single-Leg Posterior Chain</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="contrast-lower-3-body"></tbody>
    </table>
  </section>

  <section data-program="contrast-lower-4">
    <h2>Dagur 4 – Lateral / Frontal Plane</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="contrast-lower-4-body"></tbody>
    </table>
  </section>

  <section data-program="pot-schedule">
    <h2>Potentiation Clusters – 3 dagar</h2>
    <p>Dagur A: Potentiation + strength · Dagur B: Potentiation + strength · Dagur C: Potentiation + strength.</p>
  </section>

  <section data-program="pot-cluster-2-schedule">
    <h2>Potentiation Cluster – 2 dagar</h2>
    <p>Dagur 1 + Dagur 2 (Potentiation Cluster + contrast). Endurtaktu þessa tvo daga í viku.</p>
  </section>

  <section data-program="pot-cluster-4-schedule">
    <h2>Potentiation Cluster – 4 dagar</h2>
    <p>Dagur 1, Dagur 2, Dagur 3 (endurtekur Dag 1), Dagur 4 (endurtekur Dag 2) fyrir 4 daga uppbyggingu.</p>
  </section>

  <section data-program="pot-day-a">
    <h2>Dagur A</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="pot-day-a-body"></tbody>
    </table>
  </section>

  <section data-program="pot-day-b">
    <h2>Dagur B</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="pot-day-b-body"></tbody>
    </table>
  </section>

  <section data-program="pot-day-c">
    <h2>Dagur C</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="pot-day-c-body"></tbody>
    </table>
  </section>

  <section data-program="pot-cluster-day1">
    <h2>Potentiation Cluster – Dagur 1</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="pot-cluster-day1-body"></tbody>
    </table>
  </section>

  <section data-program="pot-cluster-day2">
    <h2>Potentiation Cluster – Dagur 2</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="pot-cluster-day2-body"></tbody>
    </table>
  </section>

  <section data-program="cv-schedule">
    <h2>Contrast + Velocity – 4 daga skipulag</h2>
    <p>Dagur 1: Contrast (Trap bar + Bench). Dagur 2: Low Force / High Velocity. Dagur 3: Contrast (Split squat + Chest pass). Dagur 4: High Force / High Velocity.</p>
  </section>

  <section data-program="cv-day1">
    <h2>Dagur 1 – Contrast</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Rounds</th>
          <th>Rest between sets</th>
          <th>Rest between rounds</th>
        </tr>
      </thead>
      <tbody id="cv-day1-body"></tbody>
    </table>
  </section>

  <section data-program="cv-day2">
    <h2>Dagur 2 – Low Force / High Velocity</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Rounds</th>
          <th>Rest between sets</th>
          <th>Rest between rounds</th>
        </tr>
      </thead>
      <tbody id="cv-day2-body"></tbody>
    </table>
  </section>

  <section data-program="cv-day3">
    <h2>Dagur 3 – Contrast</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Rounds</th>
          <th>Rest between sets</th>
          <th>Rest between rounds</th>
        </tr>
      </thead>
      <tbody id="cv-day3-body"></tbody>
    </table>
  </section>

  <section data-program="cv-day4">
    <h2>Dagur 4 – High Force / High Velocity</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Rounds</th>
          <th>Rest between sets</th>
          <th>Rest between rounds</th>
        </tr>
      </thead>
      <tbody id="cv-day4-body"></tbody>
    </table>
  </section>

  

  <section data-program="lower3-schedule">
    <h2>Lower Body – 3x í viku (Rehab + Styrkur)</h2>
    <p>Mán / Mið / Fös. Markmið: styrkja framan á læri (knee iso), glutes, hamstrings og kálfa fyrir tímabil. Útfærsla: Squat dagur, Hinge dagur og Combo dagur með kjarna superset innan aðallota til að spara tíma; stöðugleika-kjarni í lok hvers dags. Æfingar má taka allt að 90 mín; stilltu lóð fyrir gæði (RPE ~7–8) og bættu upphitun (5–8 mín) + ljósu blóðflæði áður en þú byrjar.</p>
  </section>

  <section data-program="lower3-day1">
    <h2>Dagur 1 – Squat dagur</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Rounds</th>
          <th>Rest between sets</th>
          <th>Rest between rounds</th>
        </tr>
      </thead>
      <tbody id="lower3-day1-body"></tbody>
    </table>
  </section>

  <section data-program="lower3-day2">
    <h2>Dagur 2 – Hinge dagur</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Rounds</th>
          <th>Rest between sets</th>
          <th>Rest between rounds</th>
        </tr>
      </thead>
      <tbody id="lower3-day2-body"></tbody>
    </table>
  </section>

  <section data-program="lower3-day3">
    <h2>Dagur 3 – Combo (squat + hinge)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Rounds</th>
          <th>Rest between sets</th>
          <th>Rest between rounds</th>
        </tr>
      </thead>
      <tbody id="lower3-day3-body"></tbody>
    </table>
  </section>

  <section data-program="hybrid-schedule">
    <h2>Hybrid – Work Capacity + Contrast (4 dagar, ≤60 mín)</h2>
    <p>Tvær work capacity lotur með þrísæti (skrefvettvangur + styrkur) og tvær contrast lotur. Haltu upphitun í 5–8 mín og skiptu yfir í meginvinnu með stuttum umskiptum til að halda undir 60 mín.</p>
    <p>Ábending: veldu lóð sem leyfir gæði (RPE ~7–8) og haltu hraða snörpum; hvíld á milli umferða skráð í töflu.</p>
  </section>

  <section data-program="hybrid-day1">
    <h2>Dagur 1 – Work Capacity</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps / Time</th>
          <th>Sets</th>
          <th>Rest between sets</th>
          <th>Rest between rounds</th>
        </tr>
      </thead>
      <tbody id="hybrid-day1-body"></tbody>
    </table>
  </section>

  <section data-program="hybrid-day2">
    <h2>Dagur 2 – Contrast (Squat + Press)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps / Time</th>
          <th>Sets</th>
          <th>Rest between sets</th>
          <th>Rest between rounds</th>
        </tr>
      </thead>
      <tbody id="hybrid-day2-body"></tbody>
    </table>
  </section>

  <section data-program="hybrid-day3">
    <h2>Dagur 3 – Work Capacity</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps / Time</th>
          <th>Sets</th>
          <th>Rest between sets</th>
          <th>Rest between rounds</th>
        </tr>
      </thead>
      <tbody id="hybrid-day3-body"></tbody>
    </table>
  </section>

  <section data-program="hybrid-day4">
    <h2>Dagur 4 – Contrast (Hinge + Pull)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps / Time</th>
          <th>Sets</th>
          <th>Rest between sets</th>
          <th>Rest between rounds</th>
        </tr>
      </thead>
      <tbody id="hybrid-day4-body"></tbody>
    </table>
  </section>

  <section data-program="accel-power-schedule">
    <h2>Acceleration &amp; Power (4 dagar, 45–60 mín)</h2>
    <p>Áhersla: fyrstu skref, lárétt kraftframleiðsla, há taugavirkni. Ef þreyta → slepptu valkvæðum stoðliðum.</p>
  </section>

  <section data-program="accel-power-day1">
    <h2>Dagur 1 – Hinge Contrast + IMTP Max</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps / Time</th>
          <th>Sets</th>
          <th>Rest between sets</th>
          <th>Rest between rounds</th>
        </tr>
      </thead>
      <tbody id="accel-power-day1-body"></tbody>
    </table>
  </section>

  <section data-program="accel-power-day2">
    <h2>Dagur 2 – Split-Stance Accel + Power Bias</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps / Time</th>
          <th>Sets</th>
          <th>Rest between sets</th>
          <th>Rest between rounds</th>
        </tr>
      </thead>
      <tbody id="accel-power-day2-body"></tbody>
    </table>
  </section>

  <section data-program="accel-power-day3">
    <h2>Dagur 3 – Hinge Iso + Horizontal Plyo</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps / Time</th>
          <th>Sets</th>
          <th>Rest between sets</th>
          <th>Rest between rounds</th>
        </tr>
      </thead>
      <tbody id="accel-power-day3-body"></tbody>
    </table>
  </section>

  <section data-program="accel-power-day4">
    <h2>Dagur 4 – Accel Contrast + Potentiation Iso</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps / Time</th>
          <th>Sets</th>
          <th>Rest between sets</th>
          <th>Rest between rounds</th>
        </tr>
      </thead>
      <tbody id="accel-power-day4-body"></tbody>
    </table>
  </section>

  <section data-program="contrast-football-schedule">
    <h2>Contrast – Football (4 dagar)</h2>
    <p>Fótbolti: hámarks strength→power flutningur, hraði og meiðslavarnir. 4 dagar (≤60 mín), contrast pör (þungt → sprengikraftur), isometric hamstrings, Nordic/Copenhagen og 3 kjarnæfingar (anti-extension, anti-rotation, lateral) í lok dags.</p>
  </section>

  <section data-program="contrast-football-day1">
    <h2>Dagur 1 – Lower (Squat Contrast)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="contrast-football-day1-body"></tbody>
    </table>
  </section>

  <section data-program="contrast-football-day2">
    <h2>Dagur 2 – Upper (Vertical Push/Pull Contrast)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="contrast-football-day2-body"></tbody>
    </table>
  </section>

  <section data-program="contrast-football-day3">
    <h2>Dagur 3 – Lower (Hinge Contrast)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="contrast-football-day3-body"></tbody>
    </table>
  </section>

  <section data-program="contrast-football-day4">
    <h2>Dagur 4 – Upper (Horizontal Push/Pull Contrast)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="contrast-football-day4-body"></tbody>
    </table>
  </section>

  <section data-program="contrast-2day-schedule">
    <h2>Contrast Combo – 2 dagar</h2>
    <p>Dagur 1 og Dagur 2 með push/pull blöndu og superset uppsetningu.</p>
  </section>

  <section data-program="contrast-2day-1">
    <h2>Dagur 1 – Combo Push &amp; Pull</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="contrast-2day-1-body"></tbody>
    </table>
  </section>

  <section data-program="contrast-2day-2">
    <h2>Dagur 2 – Combo Push &amp; Pull</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="contrast-2day-2-body"></tbody>
    </table>
  </section>

  <section data-program="contrast-custom-schedule">
    <h2>Contrast – Custom 4 daga</h2>
    <p>Hinge + sled og squat + box jump með push/pull supersettum og kjarna-stöðugleika.</p>
    <p>Velocity markmið: 0.85 m/s með 10% velocity loss (cut ≈ 0.77 m/s). Sled push: 20 m x 1, 2–4 set.</p>
  </section>

  <section data-program="contrast-custom-day1">
    <h2>Dagur 1 – Hinge (Deadlift + sleði) + Upper Pull/Push + Core</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="contrast-custom-day1-body"></tbody>
    </table>
  </section>

  <section data-program="contrast-custom-day2">
    <h2>Dagur 2 – Squat (Hnébeygja + box jump) + Upper Push/Pull + Core</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="contrast-custom-day2-body"></tbody>
    </table>
  </section>

  <section data-program="contrast-custom-day3">
    <h2>Dagur 3 – Hinge (afbrigði) + Upper Pull/Push + Core</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="contrast-custom-day3-body"></tbody>
    </table>
  </section>

  <section data-program="contrast-custom-day4">
    <h2>Dagur 4 – Squat (afbrigði) + Upper Push/Pull + Core</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="contrast-custom-day4-body"></tbody>
    </table>
  </section>

  <section data-program="french-iso3-schedule">
    <h2>French Contrast – 3 dagar (PIMA Iso í 1A)</h2>
    <p>Dagur 1: Lower (squat) · Dagur 2: Upper (push/pull) · Dagur 3: Lower (hinge). Æfing 1A er PIMA iso.</p>
  </section>

  <section data-program="french-iso3-day1">
    <h2>Dagur 1 – Lower (Squat)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="french-iso3-day1-body"></tbody>
    </table>
  </section>

  <section data-program="french-iso3-day2">
    <h2>Dagur 2 – Upper (Push/Pull)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="french-iso3-day2-body"></tbody>
    </table>
  </section>

  <section data-program="french-iso3-day3">
    <h2>Dagur 3 – Lower (Hinge)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="french-iso3-day3-body"></tbody>
    </table>
  </section>

  <section data-program="iso-contrast-schedule">
    <h2>Iso Contrast – 3 daga</h2>
    <p>Dagur 1: Lower (vertical force) · Dagur 2: Upper (horizontal) · Dagur 3: Horizontal + unilateral (sprint áhersla).</p>
  </section>

  <section data-program="iso-contrast-day1">
    <h2>Dagur 1 – Lower Body (Vertical Force)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="iso-contrast-day1-body"></tbody>
    </table>
  </section>

  <section data-program="iso-contrast-day2">
    <h2>Dagur 2 – Upper Body (Horizontal)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="iso-contrast-day2-body"></tbody>
    </table>
  </section>

  <section data-program="iso-contrast-day3">
    <h2>Dagur 3 – Horizontal + Unilateral (Sprint)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="iso-contrast-day3-body"></tbody>
    </table>
  </section>

  <section data-program="iso-contrast-4day-schedule">
    <h2>Iso Contrast – 4 dagar</h2>
    <p>Dagur 1: Lower vertical · Dagur 2: Upper horizontal · Dagur 3: Posterior chain/hinge · Dagur 4: Unilateral + sprint.</p>
  </section>

  <section data-program="iso-contrast-4day-1">
    <h2>Dagur 1 – Lower Vertical</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="iso-contrast-4day-1-body"></tbody>
    </table>
  </section>

  <section data-program="iso-contrast-4day-2">
    <h2>Dagur 2 – Upper Horizontal</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="iso-contrast-4day-2-body"></tbody>
    </table>
  </section>

  <section data-program="iso-contrast-4day-3">
    <h2>Dagur 3 – Posterior Chain / Hinge</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="iso-contrast-4day-3-body"></tbody>
    </table>
  </section>

  <section data-program="iso-contrast-4day-4">
    <h2>Dagur 4 – Unilateral / Sprint</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="iso-contrast-4day-4-body"></tbody>
    </table>
  </section>

  <section data-program="french-lower">
    <h2>French Contrast – Dagur 1 (Lower / Squat)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="french-lower-body"></tbody>
    </table>
    <div class="program-block">
      <strong>Valfrjálsar stoðæfingar</strong>
      <ul>
        <li>Nordic Hamstring: 2 x 4–6</li>
        <li>Standing Calf Iso Hold: 2 x 30–45 sek</li>
        <li>Copenhagen adductor: 2 x 6–8 (hægra/vinstri)</li>
        <li>Pallof press: 2 x 8–10 (hver hlið)</li>
      </ul>
    </div>
  </section>

  <section data-program="french-upper">
    <h2>French Contrast – Dagur 2 (Upper / Horizontal Push)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="french-upper-body"></tbody>
    </table>
    <div class="program-block">
      <strong>Valfrjálsar stoðæfingar</strong>
      <ul>
        <li>Chest-Supported Row: 2 x 6–8</li>
        <li>Scap Push-Ups: 2 x 10</li>
        <li>R. Overhead plank: 2 x 10</li>
        <li>Pallof press: 2 x 8–10 (hver hlið)</li>
      </ul>
    </div>
  </section>

  <section data-program="french-hinge">
    <h2>French Contrast – Dagur 3 (Lower / Hip Hinge)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="french-hinge-body"></tbody>
    </table>
    <div class="program-block">
      <strong>Valfrjálsar stoðæfingar</strong>
      <ul>
        <li>Copenhagen Plank: 2 x 20–30 sek</li>
        <li>Pallof press: 2 x 8–10 (hver hlið)</li>
      </ul>
    </div>
  </section>

  <section data-program="french-pull">
    <h2>French Contrast – Dagur 4 (Upper / Pull &amp; Throw)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="french-pull-body"></tbody>
    </table>
    <div class="program-block">
      <strong>Valfrjálsar stoðæfingar</strong>
      <ul>
        <li>Face Pull: 2 x 12</li>
        <li>Deep Neck Flexor Iso: 2 x 20 sek</li>
        <li>R. Overhead side plank: 2 x 6–8 (hver hlið)</li>
        <li>R. Overhead plank: 2 x 10</li>
      </ul>
    </div>
  </section>

  <section data-program="french4-lower">
    <h2>French Contrast – Dagur 1 (Lower / Squat – nýtt úrval)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="french4-lower-body"></tbody>
    </table>
    <div class="program-block">
      <strong>Valfrjálsar stoðæfingar</strong>
      <ul>
        <li>Reverse Nordic: 2 x 6–8</li>
        <li>Standing Calf Iso Hold: 2 x 30–45 sek</li>
        <li>Side Plank með reach: 2 x 20–30 sek</li>
        <li>Hollow body hold: 2 x 20–30 sek</li>
      </ul>
    </div>
  </section>

  <section data-program="french4-upper">
    <h2>French Contrast – Dagur 2 (Upper / Push – nýtt úrval)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="french4-upper-body"></tbody>
    </table>
    <div class="program-block">
      <strong>Valfrjálsar stoðæfingar</strong>
      <ul>
        <li>Chest-Supported Row: 2 x 8–10</li>
        <li>Face Pull: 2 x 12–15</li>
        <li>Serratus wall slides: 2 x 8–10</li>
        <li>Pallof press: 2 x 8–10 (hver hlið)</li>
      </ul>
    </div>
  </section>

  <section data-program="french4-hinge">
    <h2>French Contrast – Dagur 3 (Lower / Hinge – nýtt úrval)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="french4-hinge-body"></tbody>
    </table>
    <div class="program-block">
      <strong>Valfrjálsar stoðæfingar</strong>
      <ul>
        <li>Nordic hamstring eccentric: 2 x 3–4</li>
        <li>Glute march (hip thrust position): 2 x 10/side</li>
        <li>Deadbug: 2 x 6/side</li>
        <li>Suitcase carry: 2 x 20–30 m/arm</li>
      </ul>
    </div>
  </section>

  <section data-program="french4-pull">
    <h2>French Contrast – Dagur 4 (Upper / Pull &amp; Throw – nýtt úrval)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="french4-pull-body"></tbody>
    </table>
    <div class="program-block">
      <strong>Valfrjálsar stoðæfingar</strong>
      <ul>
        <li>Prone Y/T/W: 2 x 8–10 af hverju</li>
        <li>Deep Neck Flexor Iso: 2 x 20 sek</li>
        <li>Band Pull-Apart: 2 x 12–15</li>
        <li>R. Overhead side plank: 2 x 6–8 (hver hlið)</li>
      </ul>
    </div>
  </section>

  <section data-program="scheduleFrenchRot">
    <h2>French Contrast – Rotational (3 dagar)</h2>
    <p>Dagur 1: Skotputt/lóðrétt · Dagur 2: Hliðarpower · Dagur 3: Yfirhluta pressur/snúningskraftur.</p>
  </section>

  <section data-program="french-rot-day1">
    <h2>French Contrast – Dagur 1 (Rotational Shotput)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="french-rot-day1-body"></tbody>
    </table>
  </section>

  <section data-program="french-rot-day2">
    <h2>French Contrast – Dagur 2 (Lateral Power)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="french-rot-day2-body"></tbody>
    </table>
  </section>

  <section data-program="french-rot-day3">
    <h2>French Contrast – Dagur 3 (Upper Rotational)</h2>
    <table class="program-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Pattern</th>
          <th>Exercise</th>
          <th>Reps</th>
          <th>Sets</th>
          <th>Velocity Target</th>
          <th>Velocity Cut Off</th>
          <th>Velocity Drop Off</th>
          <th>% of 1RM</th>
          <th>Rest between sets</th>
        </tr>
      </thead>
      <tbody id="french-rot-day3-body"></tbody>
    </table>
  </section>

  <section data-structure="hansen" data-variant="hansen-6x1">
    <h2>Hansen Protocol – 6x1 @ 12s</h2>
    <p>Neurologísk áhersla með stökum endurtekningum og stuttum hvíldum til að hámarka gæði og motor unit recruitment.</p>
    <div class="program-block">
      <strong>Uppsetning</strong>
      <ul>
        <li>Set: 4 heildarset</li>
        <li>Hver set: 6 stakar endurtekningar</li>
        <li>Hvíld innan setts: 12 sek. milli singles</li>
      </ul>
      <strong>Notkun</strong>
      <ul>
        <li>Hvíld milli seta: 2,5–3,5 mín</li>
        <li>Áhersla: neural drif, hámarks gæði, lág efnaskiptaþreyta</li>
      </ul>
    </div>
  </section>

  <section data-structure="hansen" data-variant="hansen-3x2">
    <h2>Hansen Protocol – 3x2 @ 30s</h2>
    <p>Meiri vinnuþéttleiki með tvöföldum endurtekningum og lengri hvíld til að viðhalda krafti eftir fyrstu sprengingu.</p>
    <div class="program-block">
      <strong>Uppsetning</strong>
      <ul>
        <li>Set: 4 heildarset</li>
        <li>Hver set: 3 pör (2 reps back-to-back, samtals 6 reps)</li>
        <li>Hvíld innan setts: 30 sek. milli para</li>
      </ul>
      <strong>Notkun</strong>
      <ul>
        <li>Hvíld milli seta: 2,5–3,5 mín</li>
        <li>Áhersla: meiri vinnuþéttleiki, styrk-þol án mikils drop-off í power</li>
      </ul>
    </div>
  </section>

  </div>

  <script>
    const select = document.getElementById('structureSelect');
    const variantRow = document.getElementById('variantRow');
    const variantSelect = document.getElementById('variantSelect');
    const sections = document.querySelectorAll('[data-structure]');
    const getProgramSections = () => document.querySelectorAll('[data-program]');
    const focusSelect = document.getElementById('focusSelect');
    const focusSections = document.querySelectorAll('[data-focus]');
    const exerciseChecklist = document.getElementById('exerciseChecklist');
    const exerciseOptions = document.getElementById('exerciseOptions');
    const daysSelect = document.getElementById('daysPerWeek');
    const programRow = document.getElementById('programRow');
    const programSelect = document.getElementById('programSelect');
    const exportBtn = document.getElementById('exportPdf');
    const nameInput = document.querySelector('input[placeholder="Jón Jónsson"]');
    const printNameValue = document.getElementById('printNameValue');
    const saveNameInput = document.getElementById('saveName');
    const saveBtn = document.getElementById('saveProgram');
    const loadSelect = document.getElementById('loadProgram');
    const deleteBtn = document.getElementById('deleteProgram');
    const saveStatus = document.getElementById('saveStatus');
    const builderNameInput = document.getElementById('builderName');
    const builderDaysSelect = document.getElementById('builderDays');
    const builderCreateBtn = document.getElementById('builderCreate');
    const builderStatus = document.getElementById('builderStatus');
    const builderProgramsContainer = document.getElementById('builderPrograms');
    const builderDayConfigs = document.getElementById('builderDayConfigs');
    const builderVelocityColumnSelect = document.getElementById('builderVelocityColumn');
    const STORAGE_KEY = 'programBuilderSavedPrograms';
    const programAllowedDays = {
      'contrast1': [3],
      'french': [2,3,4],
      'french-4day-new': [4],
      'contrast-lower': [4],
      'potentiation': [3],
      'pot-cluster': [2,4],
      'french-rotational': [3],
      'french-iso3-pima': [3],
      'contrast-velocity': [4],
      'contrast-football-4day': [4],
      'hybrid-4day': [4],
      'accel-power-4day': [4],
      'lower-3day': [3],
      'contrast-2day': [2],
      'contrast-custom-4day': [4],
      'iso-contrast-3day': [3],
      'iso-contrast-4day': [4]
    };
    const mostUsedExercises = {
      squat: ['Back Squat', 'Front Squat', 'Bulgarian Split Squat (each leg)', 'Leg press', 'Goblet squat'],
      hinge: ['RDL', 'Hip thrust', 'Single-Leg RDL', 'Trap Bar Deadlift', 'KB Swing (heavy)'],
      push: ['Bench press', 'Push press', 'Standing Overhead Press', 'Landmine press'],
      pull: ['Pull ups', 'Inverted row', 'Chest-supported row', '1-arm dumbbell row'],
      core: ['Pallof press', 'Side plank', 'Dead bug', 'Stir-the-pot á bolta'],
      power: ['Jump Shrugs', 'Broad jump', 'Box Jump', 'Med Ball Chest Pass']
    };
    const builderTemplates = {
      'pull-push': ['pull', 'push'],
      'upper-lower': ['push', 'squat'],
      'lower-core': ['squat', 'core'],
      'hinge-squat': ['hinge', 'squat'],
      'push-pull': ['push', 'pull'],
      'iso-squat': ['PIMA Iso', 'power'],
      'iso-hinge': ['PIMA Iso', 'hinge'],
      'iso-ankle': ['PIMA Iso', 'power']
    };
    const builderTemplateLabels = {
      'iso-squat': 'PIMA Iso Squat / Power',
      'iso-hinge': 'PIMA Iso Hinge / Power',
      'iso-ankle': 'PIMA Iso Ankle / Power'
    };

    const programData = {
      push: [
        { id: '1', pattern: 'power', exercise: 'Jump Shrugs', reps: '3', sets: '4', vt: 'Fast as possible', cut: 'Fast as possible', drop: 'Fast as possible', percent: '30%', restSet: '20–25 sec' },
        { id: '2a', pattern: 'hinge', exercise: 'Trap Bar Deadlift', reps: '5', sets: '3', vt: '0.65', cut: '0.55', drop: '15%', percent: '80%', restSet: '20 sec' },
        { id: '2b', pattern: 'squat', exercise: 'Drop Jumps', reps: '5', sets: '3', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'N/A', restSet: '120 sec' },
        { id: '3a', pattern: 'push', exercise: 'Bench Press', reps: '5', sets: '3', vt: '0.65', cut: '0.55', drop: '15%', percent: '80%', restSet: '20 sec' },
        { id: '3b', pattern: 'push', exercise: 'Plyo push-up', reps: '5', sets: '3', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'N/A', percent: 'N/A', restSet: '120 sec' },
        { id: '4a', pattern: 'squat', exercise: 'Box Step Up (each leg)', reps: '5', sets: '2', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '65%', restSet: '30 sec' },
        { id: '4b', pattern: 'push', exercise: 'Push press', reps: '5', sets: '2', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '65%', restSet: '90 sec' },
        { id: '5a', pattern: 'squat', exercise: 'Adductor Valslide Lunge (each leg)', reps: '6–8', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '15 sec' },
        { id: '5b', pattern: 'core', exercise: 'Pallof press (each side)', reps: '8–10', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '30 sec' }
      ],
      pull: [
        { id: '1', pattern: 'power', exercise: 'Mid-thigh Clean Pull', reps: '3', sets: '4', vt: 'Fast as possible', cut: 'Fast as possible', drop: 'Fast as possible', percent: '80%', restSet: '20–25 sec' },
        { id: '2a', pattern: 'hinge', exercise: 'RDL eða Single-Leg RDL', reps: '5', sets: '2', vt: '0.65', cut: '0.55', drop: '15%', percent: '80%', restSet: '30 sec' },
        { id: '2b', pattern: 'hinge', exercise: 'MB Moye Start (each leg)', reps: '3', sets: '2', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'N/A', restSet: '180 sec' },
        { id: '3a', pattern: 'pull', exercise: 'Chin Ups', reps: '5', sets: '2', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'N/A', restSet: '30 sec' },
        { id: '3b', pattern: 'hinge', exercise: 'Barbell Hip Thrust', reps: '5', sets: '2', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'N/A', restSet: '180 sec' },
        { id: '4a', pattern: 'core', exercise: 'Copenhagen adductor (each leg)', reps: '6–8', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '15 sec' },
        { id: '4b', pattern: 'core', exercise: 'R. Overhead side plank (each side)', reps: '6–8', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '30 sec' },
        { id: '4c', pattern: 'core', exercise: 'R. Overhead plank', reps: '10', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '30 sec' },
        { id: '5', pattern: 'hinge', exercise: 'Nordic hamstring', reps: '4–6', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '' }
      ],
      combo: [
        { id: '1', pattern: 'power', exercise: 'Mid-thigh Snatch Pull', reps: '3', sets: '4', vt: 'Fast as possible', cut: 'Fast as possible', drop: 'Fast as possible', percent: '60%', restSet: '20–25 sec' },
        { id: '2a', pattern: 'hinge', exercise: 'DB Snatch (each arm)', reps: '2', sets: '4', vt: 'Fast as possible', cut: 'Fast as possible', drop: 'Fast as possible', percent: 'N/A', restSet: '30 sec' },
        { id: '2b', pattern: 'core', exercise: 'MB oblique throw (each side)', reps: '3', sets: '4', vt: 'Fast as possible', cut: 'Fast as possible', drop: 'Fast as possible', percent: 'N/A', restSet: '60 sec' },
        { id: '3a', pattern: 'squat', exercise: 'Bulgarian Split Squat (each leg)', reps: '5', sets: '2', vt: '0.9', cut: '0.77', drop: '15%', percent: '60%', restSet: '' },
        { id: '3b', pattern: 'push', exercise: 'Bench press', reps: '5', sets: '2', vt: '0.85', cut: '0.72', drop: '15%', percent: '65%', restSet: '90 sec' },
        { id: '4a', pattern: 'hinge', exercise: 'Barbell hip thrust', reps: '5', sets: '2', vt: '3–5 sec iso', cut: 'N/A', drop: 'N/A', percent: '80%', restSet: '30 sec' },
        { id: '4b', pattern: 'pull', exercise: 'Pull ups', reps: '5', sets: '2', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'N/A', restSet: '60 sec' },
        { id: '5a', pattern: 'core', exercise: 'R. Overhead side plank (each side)', reps: '6–8', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '30 sec' },
        { id: '5b', pattern: 'core', exercise: 'R. Overhead plank', reps: '10', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '30 sec' },
        { id: '5c', pattern: 'core', exercise: 'Pallof press (each side)', reps: '8–10', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '30 sec' },
        { id: '6', pattern: 'hinge', exercise: 'Nordic hamstring', reps: '4–6', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '90 sec' }
      ],
      "accel-power-day1": [
        { id: 'A1', pattern: 'hinge', exercise: 'IMTP (max)', reps: '3–4 sek', sets: '4', restSets: '2–3 mín', restRounds: '' },
        { id: 'B1', pattern: 'hinge', exercise: 'Trap Bar Deadlift (þungt)', reps: '3', sets: '3–4', restSets: '2–3 mín', restRounds: '' },
        { id: 'B2', pattern: 'power', exercise: 'Broad Jump', reps: '3', sets: '3–4', restSets: '60–90 sek (milli para)', restRounds: '2–3 mín milli setta' },
        { id: 'C1', pattern: 'power', exercise: 'Jump Shrug', reps: '3', sets: '3', restSets: '90 sek', restRounds: '' },
        { id: 'D1', pattern: 'push', exercise: 'Band face pull + Scap push-up (stoð)', reps: '10–12 (superset)', sets: '2', restSets: '60 sek', restRounds: '' },
        { id: 'E1', pattern: 'core', exercise: 'Pallof press eða Side plank reach (val)', reps: '8/side', sets: '2', restSets: '', restRounds: '' }
      ],
      "accel-power-day2": [
        { id: 'A1', pattern: 'hinge', exercise: 'Split-Stance Iso (framfótar push)', reps: '6–8 sek/side', sets: '3', restSets: '45–60 sek', restRounds: '' },
        { id: 'B1', pattern: 'squat', exercise: 'Front Foot Elevated Split Squat (þungt)', reps: '4/side', sets: '3–4', restSets: '2–3 mín', restRounds: '' },
        { id: 'B2', pattern: 'power', exercise: 'Hurdle Bounds', reps: '4–5', sets: '3–4', restSets: '60–90 sek (milli para)', restRounds: '2–3 mín milli setta' },
        { id: 'C1', pattern: 'power', exercise: 'Jump Shrug', reps: '3', sets: '3', restSets: '75–90 sek', restRounds: '' },
        { id: 'D1', pattern: 'hinge', exercise: 'IMTP (neural/potent)', reps: '2–3 sek', sets: '2', restSets: '2 mín', restRounds: '' },
        { id: 'E1', pattern: 'push', exercise: 'SA DB row + Landmine press (létt)', reps: '8–10', sets: '2', restSets: '60 sek', restRounds: '' }
      ],
      "accel-power-day3": [
        { id: 'A1', pattern: 'hinge', exercise: 'IMTP (max)', reps: '3–4 sek', sets: '3', restSets: '2–3 mín', restRounds: '' },
        { id: 'B1', pattern: 'hinge', exercise: 'RDL eða Trap Bar RDL (miðlungs)', reps: '5', sets: '3', restSets: '2–3 mín', restRounds: '' },
        { id: 'B2', pattern: 'power', exercise: 'Single-Leg Broad Jump', reps: '3/side', sets: '3', restSets: '60–90 sek (milli para)', restRounds: '2–3 mín milli setta' },
        { id: 'C1', pattern: 'power', exercise: 'Jump Shrug', reps: '3', sets: '3', restSets: '90 sek', restRounds: '' },
        { id: 'D1', pattern: 'hinge', exercise: 'Nordic iso (partial)', reps: '10–15 sek', sets: '2', restSets: '60 sek', restRounds: '' },
        { id: 'E1', pattern: 'pull', exercise: 'Band row + Band pull-apart', reps: '12', sets: '2', restSets: '60 sek', restRounds: '' }
      ],
      "accel-power-day4": [
        { id: 'A1', pattern: 'squat', exercise: 'Heavy Split Squat (stutt ROM)', reps: '3/side', sets: '3', restSets: '2–3 mín', restRounds: '' },
        { id: 'A2', pattern: 'power', exercise: 'Bounds / Power skip', reps: '3/side', sets: '3', restSets: '60–90 sek (milli para)', restRounds: '2–3 mín milli setta' },
        { id: 'B1', pattern: 'power', exercise: 'Jump Shrug', reps: '3', sets: '3', restSets: '75–90 sek', restRounds: '' },
        { id: 'B2', pattern: 'hinge', exercise: 'IMTP (neural, stutt)', reps: '2 sek', sets: '2', restSets: '2 mín', restRounds: '' },
        { id: 'C1', pattern: 'core', exercise: 'Box Breathing + Low Bear Hold', reps: '30–40 sek', sets: '2', restSets: '', restRounds: '' },
        { id: 'E1', pattern: 'push', exercise: 'Push-up iso 2–3 sek + Band ER (létt)', reps: '8', sets: '2', restSets: '60 sek', restRounds: '' }
      ],
      "french-lower": [
        { id: 'A1', pattern: 'squat', exercise: 'Back Squat', reps: '2', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: '85–90%', restSet: '' },
        { id: 'A2', pattern: 'power', exercise: 'Drop Jump', reps: '4', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: 'Bodyweight', restSet: '' },
        { id: 'A3', pattern: 'power', exercise: 'Jump Squat', reps: '4', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: '~30%', restSet: '' },
        { id: 'A4', pattern: 'power', exercise: 'Band-Assisted Vertical Jump', reps: '4', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: 'Bodyweight', restSet: '' }
      ],
      "french-upper": [
        { id: 'A1', pattern: 'push', exercise: 'Bench Press', reps: '2', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: '85–90%', restSet: '' },
        { id: 'A2', pattern: 'push', exercise: 'Plyometric Push-Up', reps: '5', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: 'Bodyweight', restSet: '' },
        { id: 'A3', pattern: 'power', exercise: 'Medicine Ball Chest Throw', reps: '5', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: 'Light MB', restSet: '' },
        { id: 'A4', pattern: 'push', exercise: 'Band-Assisted Plyometric Push-Up', reps: '5', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: 'Assisted', restSet: '' }
      ],
      "french-hinge": [
        { id: 'A1', pattern: 'hinge', exercise: 'Trap Bar Deadlift', reps: '2', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: '85–90%', restSet: '' },
        { id: 'A2', pattern: 'power', exercise: 'Broad Jump', reps: '3', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: 'Bodyweight', restSet: '' },
        { id: 'A3', pattern: 'power', exercise: 'Trap Bar Jump', reps: '4', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: '~30%', restSet: '' },
        { id: 'A4', pattern: 'power', exercise: 'Band-Assisted Broad Jump', reps: '3', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: 'Bodyweight', restSet: '' }
      ],
      "french-pull": [
        { id: 'A1', pattern: 'pull', exercise: 'Weighted Pull-Up', reps: '2–3', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: 'Added load', restSet: '' },
        { id: 'A2', pattern: 'power', exercise: 'Medicine Ball Slam', reps: '4', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: 'Light MB', restSet: '' },
        { id: 'A3', pattern: 'pull', exercise: 'Explosive Inverted Row', reps: '4', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: 'Bodyweight', restSet: '' },
        { id: 'A4', pattern: 'pull', exercise: 'Band-Assisted Pull-Up', reps: '4', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: 'Assisted', restSet: '' }
      ],
      "french4-lower": [
        { id: 'A1', pattern: 'squat', exercise: 'Front Squat', reps: '2', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: '85–90%', restSet: '' },
        { id: 'A2', pattern: 'power', exercise: 'Hurdle Hop to Stick', reps: '4', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: 'Bodyweight', restSet: '' },
        { id: 'A3', pattern: 'power', exercise: 'Trap Bar Jump (light)', reps: '4', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: '30–40%', restSet: '' },
        { id: 'A4', pattern: 'power', exercise: 'Band-Assisted Vertical Jump', reps: '4', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: 'Bodyweight', restSet: '' }
      ],
      "french4-upper": [
        { id: 'A1', pattern: 'push', exercise: 'Close-Grip Bench Press', reps: '2', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: '85–90%', restSet: '' },
        { id: 'A2', pattern: 'push', exercise: 'Depth Drop to Plyo Push-Up', reps: '4', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: 'Bodyweight', restSet: '' },
        { id: 'A3', pattern: 'push', exercise: 'Landmine Push Press', reps: '4', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: '30–40%', restSet: '' },
        { id: 'A4', pattern: 'power', exercise: 'Med Ball Punch Chest Pass', reps: '5', sets: '3', vt: 'Fast as possible', cut: '', drop: '', percent: 'Light MB', restSet: '' }
      ],
      "french4-hinge": [
        { id: 'A1', pattern: 'hinge', exercise: 'Rack Pull (just above knee)', reps: '2', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: '85–90%', restSet: '' },
        { id: 'A2', pattern: 'power', exercise: 'Broad Jump to Stick Landing', reps: '3', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: 'Bodyweight', restSet: '' },
        { id: 'A3', pattern: 'hinge', exercise: 'Heavy Kettlebell Swing', reps: '6', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: 'Heavy KB', restSet: '' },
        { id: 'A4', pattern: 'power', exercise: 'Band-Assisted Broad Jump', reps: '3', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: 'Bodyweight', restSet: '' }
      ],
      "french4-pull": [
        { id: 'A1', pattern: 'pull', exercise: 'Weighted Chin-Up', reps: '2–3', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: 'Added load', restSet: '' },
        { id: 'A2', pattern: 'power', exercise: 'Med Ball Rotational Scoop Toss', reps: '4', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: 'Light MB', restSet: '' },
        { id: 'A3', pattern: 'pull', exercise: 'High Pull from Hang', reps: '3', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: '60–70%', restSet: '' },
        { id: 'A4', pattern: 'pull', exercise: 'Band-Assisted Inverted Row', reps: '5', sets: '4', vt: 'Fast as possible', cut: '', drop: '', percent: 'Assisted', restSet: '' }
      ],
      "contrast-lower-1": [
        { id: 'A1', pattern: 'squat', exercise: 'Rear-Foot Elevated Split Squat (RFESS)', reps: '3/leg', sets: '5', vt: '', cut: '', drop: '', percent: '', restSet: '60–75 sec' },
        { id: 'A2', pattern: 'power', exercise: 'Box Jump', reps: '3', sets: '5', vt: '', cut: '', drop: '', percent: '', restSet: '60–75 sec' },
        { id: 'B1', pattern: 'hinge', exercise: '45° Back Extension – Iso Hold', reps: '40 sec', sets: '3', vt: '', cut: '', drop: '', percent: '', restSet: '30 sec' },
        { id: 'B2', pattern: 'push', exercise: 'Half-Kneeling Landmine Press (single-arm)', reps: '6/side', sets: '3', vt: '', cut: '', drop: '', percent: '', restSet: '30 sec' },
        { id: 'B3', pattern: 'pull', exercise: 'Chest-Supported 1-Arm DB Row', reps: '8/side', sets: '3', vt: '', cut: '', drop: '', percent: '', restSet: '30 sec' },
        { id: 'C1', pattern: 'core', exercise: 'R. Overhead Side Plank', reps: '30 sec/side', sets: '2', vt: '', cut: '', drop: '', percent: '', restSet: '20 sec' },
        { id: 'C2', pattern: 'core', exercise: 'R. Overhead Plank', reps: '30 sec', sets: '2', vt: '', cut: '', drop: '', percent: '', restSet: '20 sec' },
        { id: 'C3', pattern: 'core', exercise: 'Pallof Press', reps: '10/side', sets: '2', vt: '', cut: '', drop: '', percent: '', restSet: '20 sec' }
      ],
      "contrast-lower-2": [
        { id: 'A1', pattern: 'hinge', exercise: 'Trap Bar Deadlift', reps: '3', sets: '5', vt: '', cut: '', drop: '', percent: '', restSet: '90 sec' },
        { id: 'A2', pattern: 'power', exercise: 'Broad Jump / Trap Bar Jump', reps: '3', sets: '5', vt: '', cut: '', drop: '', percent: '', restSet: '75–90 sec' },
        { id: 'B1', pattern: 'push', exercise: 'Incline Bench Press', reps: '10', sets: '3', vt: '', cut: '', drop: '', percent: '', restSet: '30 sec' },
        { id: 'B2', pattern: 'pull', exercise: 'One-Arm Cable Row', reps: '8/side', sets: '3', vt: '', cut: '', drop: '', percent: '', restSet: '30 sec' },
        { id: 'C1', pattern: 'core', exercise: 'Deadbug', reps: '5 x 5 sec/side', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '20 sec' },
        { id: 'C2', pattern: 'core', exercise: 'R. Overhead Plank', reps: '10 sec', sets: '5', vt: '', cut: '', drop: '', percent: '', restSet: '20 sec' },
        { id: 'C3', pattern: 'core', exercise: 'Pallof Press', reps: '5/side', sets: '5', vt: '', cut: '', drop: '', percent: '', restSet: '20 sec' }
      ],
      "contrast-lower-3": [
        { id: 'A1', pattern: 'hinge', exercise: 'Single-Leg Romanian Deadlift', reps: '3/leg', sets: '5', vt: '', cut: '', drop: '', percent: '', restSet: '60–75 sec' },
        { id: 'A2', pattern: 'power', exercise: 'Single-Leg Bounds', reps: '3/leg', sets: '5', vt: '', cut: '', drop: '', percent: '', restSet: '60–75 sec' },
        { id: 'B1', pattern: 'hinge', exercise: '45° Back Extension – Iso Hold', reps: '40 sec', sets: '3', vt: '', cut: '', drop: '', percent: '', restSet: '30 sec' },
        { id: 'B2', pattern: 'push', exercise: 'Half-Kneeling Landmine Press (single-arm)', reps: '6/side', sets: '3', vt: '', cut: '', drop: '', percent: '', restSet: '30 sec' },
        { id: 'B3', pattern: 'pull', exercise: 'Chest-Supported 1-Arm DB Row', reps: '8/side', sets: '3', vt: '', cut: '', drop: '', percent: '', restSet: '30 sec' },
        { id: 'C1', pattern: 'core', exercise: 'R. Overhead Plank', reps: '10 sec', sets: '2', vt: '', cut: '', drop: '', percent: '', restSet: '20 sec' },
        { id: 'C2', pattern: 'core', exercise: 'Pallof Press', reps: '10/side', sets: '2', vt: '', cut: '', drop: '', percent: '', restSet: '20 sec' }
      ],
      "contrast-lower-4": [
        { id: 'A1', pattern: 'squat', exercise: 'Lateral Split Squat', reps: '3/side', sets: '5', vt: '', cut: '', drop: '', percent: '', restSet: '60–75 sec' },
        { id: 'A2', pattern: 'power', exercise: 'Skater Jump', reps: '3/side', sets: '5', vt: '', cut: '', drop: '', percent: '', restSet: '60–75 sec' },
        { id: 'B1', pattern: 'push', exercise: 'Single-Arm Landmine Press', reps: '6/side', sets: '3', vt: '', cut: '', drop: '', percent: '', restSet: '30 sec' },
        { id: 'B2', pattern: 'pull', exercise: 'One-Arm Supported Row', reps: '8/side', sets: '3', vt: '', cut: '', drop: '', percent: '', restSet: '30 sec' },
        { id: 'C1', pattern: 'core', exercise: 'R. Overhead Side Plank', reps: '10 sec/side', sets: '5', vt: '', cut: '', drop: '', percent: '', restSet: '20 sec' },
        { id: 'C2', pattern: 'core', exercise: 'R. Overhead Plank', reps: '10 sec', sets: '5', vt: '', cut: '', drop: '', percent: '', restSet: '20 sec' }
      ],
      "pot-day-a": [
        { id: '1a', pattern: 'hinge', exercise: 'Deadlift', reps: '1', sets: '6 x 2 rounds', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '10 sec; 90–120 sec rounds' },
        { id: '1b', pattern: 'power', exercise: 'Drop jump + hurdle jump', reps: '1', sets: '6 x 2 rounds', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '10 sec; 90–120 sec rounds' },
        { id: '2a', pattern: 'push', exercise: 'Bench press', reps: '1', sets: '6 x 2 rounds', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '10 sec; 90–120 sec rounds' },
        { id: '2b', pattern: 'push', exercise: 'Explosive push-ups', reps: '1', sets: '6 x 2 rounds', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '10 sec; 90–120 sec rounds' },
        { id: '3a', pattern: 'squat', exercise: 'Goblet squat', reps: '5', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '' },
        { id: '3b', pattern: 'pull', exercise: 'Chin-ups', reps: '5', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '' },
        { id: '3c', pattern: 'push', exercise: 'Shoulder press', reps: '5', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '' },
        { id: '4a', pattern: 'hinge', exercise: 'Hip thrust', reps: '10', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '' },
        { id: '4b', pattern: 'core', exercise: 'Saw plank', reps: '10', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '' },
        { id: '4c', pattern: 'core', exercise: 'Suitcase walk', reps: '40 m each arm', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '' }
      ],
      "pot-day-b": [
        { id: '1a', pattern: 'power', exercise: 'Snatch High pull or Barbell Squat jump', reps: '1', sets: '6 x 2 rounds', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '10 sec; 90–120 sec rounds' },
        { id: '1b', pattern: 'power', exercise: 'Box jumps', reps: '1', sets: '6 x 2 rounds', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '10 sec; 90–120 sec rounds' },
        { id: '2a', pattern: 'push', exercise: 'Push press', reps: '1', sets: '6 x 2 rounds', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '10 sec; 90–120 sec rounds' },
        { id: '2b', pattern: 'power', exercise: 'MB Push press throw', reps: '1', sets: '6 x 2 rounds', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '10 sec; 90–120 sec rounds' },
        { id: '3a', pattern: 'squat', exercise: 'Reverse lunge', reps: '5/leg', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '' },
        { id: '3b', pattern: 'pull', exercise: 'Bent over row', reps: '5', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '' },
        { id: '3c', pattern: 'push', exercise: 'Incline bench press', reps: '5', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '' },
        { id: '4a', pattern: 'hinge', exercise: 'Hip extension plus knee flexion', reps: '10', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '' },
        { id: '4b', pattern: 'push', exercise: 'Shoulder press', reps: '10', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '' },
        { id: '4c', pattern: 'push', exercise: 'Bicep curl', reps: '10', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '' }
      ],
      "pot-day-c": [
        { id: '1a', pattern: 'squat', exercise: 'Bulgarian split squat', reps: '1', sets: '6 x 2 rounds', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '10 sec; 90–120 sec rounds' },
        { id: '1b', pattern: 'power', exercise: 'Bulgarian split jump', reps: '1', sets: '6 x 2 rounds', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '10 sec; 90–120 sec rounds' },
        { id: '2a', pattern: 'push', exercise: 'Bench press', reps: '5', sets: '1', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '' },
        { id: '2b', pattern: 'pull', exercise: 'Chin-ups', reps: '5', sets: '1', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '' },
        { id: '2c', pattern: 'hinge', exercise: 'Deadlift', reps: '5', sets: '1', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '' },
        { id: '3a', pattern: 'hinge', exercise: 'Single leg hip extension feet elevated', reps: '10 each leg', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '' },
        { id: '3b', pattern: 'core', exercise: 'Roll out', reps: '10', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '' },
        { id: '3c', pattern: 'carry', exercise: 'Rack carries', reps: '40 m', sets: '1', vt: '', cut: '', drop: '', percent: '', restSet: '' }
      ],
      "pot-cluster-day1": [
        { id: '1', pattern: 'power', exercise: 'Iso mid thigh pull', reps: '1', sets: '10', vt: '3.0', cut: '2.70', drop: '10%', percent: 'N/A', restSet: '15 sec' },
        { id: '2a', pattern: 'hinge', exercise: 'TrapBar Deadlift or B Split Squat', reps: '1', sets: '6', vt: '0.95', cut: '0.86', drop: '10%', percent: 'N/A', restSet: '10 sec' },
        { id: '2b', pattern: 'power', exercise: 'Drop Jumps', reps: '1', sets: '6', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'N/A', restSet: '180 sec' },
        { id: '3a', pattern: 'push', exercise: 'Push press or bench press', reps: '3–5', sets: '2', vt: '0.75', cut: '0.68', drop: '10%', percent: 'N/A', restSet: '10 sec' },
        { id: '3b', pattern: 'push', exercise: 'MB Chest pass', reps: '3–5', sets: '2', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'N/A', restSet: '180 sec' },
        { id: '4a', pattern: 'core', exercise: 'Copenhagen adductor', reps: '6–8 each leg', sets: '1–2', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '15 sec' },
        { id: '4b', pattern: 'core', exercise: 'R. Overhead side plank', reps: '6–8 each side', sets: '1–2', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '30 sec' },
        { id: '4c', pattern: 'core', exercise: 'Iso hamstring', reps: '3', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '90 sec' }
      ],
      "pot-cluster-day2": [
        { id: '1', pattern: 'power', exercise: 'Jump shrugs', reps: '2', sets: '10', vt: '3.0', cut: '2.70', drop: '10%', percent: 'N/A', restSet: '15 sec' },
        { id: '2a', pattern: 'squat', exercise: 'Bulgarian split squat', reps: '1 á fót', sets: '6', vt: '0.8', cut: '0.72', drop: '10%', percent: 'N/A', restSet: '10 sec' },
        { id: '2b', pattern: 'power', exercise: 'Single leg box jumps', reps: '1 á fót', sets: '6', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'N/A', restSet: '180 sec' },
        { id: '3a', pattern: 'push', exercise: 'Bench press', reps: '1', sets: '6', vt: '0.75', cut: '0.68', drop: '10%', percent: 'N/A', restSet: '10 sec' },
        { id: '3b', pattern: 'push', exercise: 'MB Chest pass', reps: '1', sets: '6', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'N/A', restSet: '180 sec' },
        { id: '4a', pattern: 'core', exercise: 'Copenhagen adductor', reps: '6–8 á fót', sets: '1–2', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '15 sec' },
        { id: '4b', pattern: 'core', exercise: 'Pallof press', reps: '6–8 á hlið', sets: '1–2', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '30 sec' },
        { id: '4c', pattern: 'hinge', exercise: 'Hip thrust', reps: '10', sets: '1–2', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '90 sec' }
      ],
      "cv-day1": [
        { id: '1a', pattern: 'hinge', exercise: 'Trap Bar Deadlift', reps: '5', sets: '2–4', rounds: '', restSets: '', restRounds: '' },
        { id: '1b', pattern: 'power', exercise: 'Drop jumps', reps: '5', sets: '2–4', rounds: '', restSets: '2–3 min', restRounds: '' },
        { id: '2a', pattern: 'push', exercise: 'Bench press', reps: '5', sets: '2–4', rounds: '', restSets: '', restRounds: '' },
        { id: '2b', pattern: 'push', exercise: 'Plyo push-up', reps: '5', sets: '2–4', rounds: '', restSets: '2–3 min', restRounds: '' },
        { id: '3', pattern: 'core', exercise: 'Copenhagen', reps: '5 reps x 5 sec', sets: '1–2', rounds: '', restSets: '1 min', restRounds: '' },
        { id: '4', pattern: 'core', exercise: 'Pallof press', reps: '5 reps x 5 sec', sets: '1–2', rounds: '', restSets: '1 min', restRounds: '' },
        { id: '5', pattern: 'core', exercise: 'Overhead side plank', reps: '5 reps x 5 sec', sets: '1–2', rounds: '', restSets: '1 min', restRounds: '' }
      ],
      "cv-day2": [
        { id: '1', pattern: 'power', exercise: 'Jump shrugs', reps: '2', sets: '10', rounds: '1–2', restSets: '10–15 sek', restRounds: '3–4 min' },
        { id: '2', pattern: 'push', exercise: 'Landmine push press', reps: '2 each arm', sets: '10', rounds: '1–2', restSets: '10–15 sek', restRounds: '3–4 min' },
        { id: '3', pattern: 'core', exercise: 'MB Oblique throw with 2 lateral shuffle', reps: '2 reach side', sets: '10', rounds: '1–2', restSets: '10–15 sek', restRounds: '2–3 min' },
        { id: '4', pattern: 'core', exercise: 'Deadbug', reps: '5 reps x 5 sec', sets: '1–2', rounds: '', restSets: '1 min', restRounds: '' },
        { id: '5', pattern: 'core', exercise: 'Overhead plank', reps: '5 reps x 5 sec', sets: '1–2', rounds: '', restSets: '1 min', restRounds: '' },
        { id: '6', pattern: 'carry', exercise: 'Farmers walk', reps: '20 m', sets: '3–4', rounds: '', restSets: '30 sek', restRounds: '' }
      ],
      "cv-day3": [
        { id: '1a', pattern: 'squat', exercise: 'B. Split squat', reps: '5 each leg', sets: '2–4', rounds: '', restSets: '', restRounds: '' },
        { id: '1b', pattern: 'power', exercise: 'Moye Start or single leg box jumps', reps: '5 each leg', sets: '2–4', rounds: '', restSets: '2–3 min', restRounds: '' },
        { id: '2a', pattern: 'push', exercise: 'Bench press', reps: '5', sets: '2–4', rounds: '', restSets: '', restRounds: '' },
        { id: '2b', pattern: 'power', exercise: 'MB rotational chest pass', reps: '5 each side', sets: '2–4', rounds: '', restSets: '2–3 min', restRounds: '' },
        { id: '3', pattern: 'core', exercise: 'Copenhagen', reps: '5 reps x 5 sec', sets: '1–2', rounds: '', restSets: '1 min', restRounds: '' },
        { id: '4', pattern: 'core', exercise: 'Pallof press', reps: '5 reps x 5 sec', sets: '1–2', rounds: '', restSets: '1 min', restRounds: '' },
        { id: '5', pattern: 'core', exercise: 'Overhead side plank', reps: '5 reps x 5 sec', sets: '1–2', rounds: '', restSets: '1 min', restRounds: '' }
      ],
      "cv-day4": [
        { id: '1', pattern: 'power', exercise: 'Mid thigh pull', reps: '2', sets: '3', rounds: '2–3', restSets: '25–30 sek', restRounds: '2–3 min' },
        { id: '2', pattern: 'power', exercise: 'Hang high pull', reps: '4', sets: '5', rounds: '2–3', restSets: '25–30 sek', restRounds: '2–3 min' },
        { id: '3', pattern: 'push', exercise: 'Push press', reps: '4', sets: '5', rounds: '2–3', restSets: '25–30 sek', restRounds: '2–3 min' },
        { id: '4', pattern: 'core', exercise: 'Deadbug', reps: '5 reps x 5 sec', sets: '1–2', rounds: '', restSets: '1 min', restRounds: '' },
        { id: '5', pattern: 'core', exercise: 'Overhead plank', reps: '5 reps x 5 sec', sets: '1–2', rounds: '', restSets: '1 min', restRounds: '' },
        { id: '6', pattern: 'carry', exercise: 'Farmers walk', reps: '20 m', sets: '3–4', rounds: '', restSets: '30 sek', restRounds: '' }
      ],
      "lower3-day1": [
        { id: 'Prep', pattern: 'PIMA Iso', exercise: 'Knee Iso-Push (Extension)', reps: '3–4s push', sets: '3', rounds: '', restSets: '20–30s', restRounds: '' },
        { id: 'A1', pattern: 'squat', exercise: 'Back eða Front Squat', reps: '5–6', sets: '3–4', rounds: '', restSets: '75–90s', restRounds: '' },
        { id: 'A2', pattern: 'core', exercise: 'Side plank', reps: '30–45s/side', sets: '3', rounds: '', restSets: '45s', restRounds: '' },
        { id: 'B1', pattern: 'squat', exercise: 'Bulgarian Split Squat (each leg)', reps: '6–8/side', sets: '3', rounds: '', restSets: '75–90s', restRounds: '' },
        { id: 'B2', pattern: 'core', exercise: 'Pallof press', reps: '10/side', sets: '3', rounds: '', restSets: '45s', restRounds: '' },
        { id: 'C1', pattern: 'squat', exercise: 'Leg press', reps: '8–10', sets: '3', rounds: '', restSets: '75–90s', restRounds: '' },
        { id: 'C2', pattern: 'core', exercise: 'Dead bug', reps: '8–10/side', sets: '3', rounds: '', restSets: '45s', restRounds: '' },
        { id: 'Fin1', pattern: 'core', exercise: 'Hollow hold', reps: '20–30s', sets: '2', rounds: '', restSets: '45s', restRounds: '' },
        { id: 'Fin2', pattern: 'core', exercise: 'Bird dog (pause)', reps: '8/side', sets: '2', rounds: '', restSets: '30–45s', restRounds: '' }
      ],
      "lower3-day2": [
        { id: 'Prep', pattern: 'PIMA Iso', exercise: 'Knee Iso-Push (Extension)', reps: '3–4s push', sets: '3', rounds: '', restSets: '20–30s', restRounds: '' },
        { id: 'A1', pattern: 'hinge', exercise: 'RDL', reps: '6–8', sets: '3–4', rounds: '', restSets: '90–120s', restRounds: '' },
        { id: 'A2', pattern: 'core', exercise: 'Pallof press hold', reps: '20–30s/side', sets: '3', rounds: '', restSets: '45s', restRounds: '' },
        { id: 'B1', pattern: 'hinge', exercise: 'Hip thrust', reps: '8–10', sets: '3', rounds: '', restSets: '90s', restRounds: '' },
        { id: 'B2', pattern: 'core', exercise: 'Stir-the-pot á bolta', reps: '8–10 hringir/átt', sets: '2', rounds: '', restSets: '45s', restRounds: '' },
        { id: 'C1', pattern: 'hinge', exercise: 'Hamstring curl', reps: '10–12', sets: '3', rounds: '', restSets: '75–90s', restRounds: '' },
        { id: 'C2', pattern: 'core', exercise: 'Side plank row (band eða cable)', reps: '8–10/side', sets: '2', rounds: '', restSets: '45s', restRounds: '' },
        { id: 'D1', pattern: 'hinge', exercise: 'Seated calf raise', reps: '12–15', sets: '3', rounds: '', restSets: '60s', restRounds: '' },
        { id: 'Fin', pattern: 'carry', exercise: 'Farmer’s carry', reps: '30–40s', sets: '3', rounds: '', restSets: '60s', restRounds: '' }
      ],
      "lower3-day3": [
        { id: 'Prep', pattern: 'PIMA Iso', exercise: 'Knee Iso-Push (Extension)', reps: '2–3s push', sets: '3', rounds: '', restSets: '20–30s', restRounds: '' },
        { id: 'A1', pattern: 'squat', exercise: 'Bulgarian Split Squat (each leg)', reps: '6–8/side', sets: '3', rounds: '', restSets: '75–90s', restRounds: '' },
        { id: 'A2', pattern: 'core', exercise: 'Pallof press walkout', reps: '8/side', sets: '2', rounds: '', restSets: '45s', restRounds: '' },
        { id: 'B1', pattern: 'hinge', exercise: 'Single-Leg RDL', reps: '8/side', sets: '3', rounds: '', restSets: '90s', restRounds: '' },
        { id: 'B2', pattern: 'core', exercise: 'Side plank', reps: '30–40s/side', sets: '2', rounds: '', restSets: '30s', restRounds: '' },
        { id: 'C1', pattern: 'squat', exercise: 'Step up', reps: '8/side', sets: '3', rounds: '', restSets: '75–90s', restRounds: '' },
        { id: 'C2', pattern: 'core', exercise: 'Dead bug', reps: '8–10/side', sets: '2', rounds: '', restSets: '45s', restRounds: '' },
        { id: 'D1', pattern: 'hinge', exercise: 'Standing calf raise', reps: '15', sets: '3', rounds: '', restSets: '60s', restRounds: '' },
        { id: 'Fin1', pattern: 'core', exercise: 'Bird dog (pause)', reps: '8/side', sets: '2', rounds: '', restSets: '30–45s', restRounds: '' },
        { id: 'Fin2', pattern: 'core', exercise: 'Hollow hold', reps: '20–30s', sets: '2', rounds: '', restSets: '45s', restRounds: '' }
      ],
      "hybrid-day1": [
        { id: '1a', pattern: 'conditioning', exercise: 'Run 2:00 (500m goal)', reps: '2 min', sets: '3–4', rounds: 'Triset 1', restSets: 'Smooth transitions', restRounds: '2 min after 1c' },
        { id: '1b', pattern: 'push', exercise: 'Thruster', reps: '12–15', sets: '3–4', rounds: '', restSets: '', restRounds: '' },
        { id: '1c', pattern: 'pull', exercise: 'Pull ups', reps: '12–15', sets: '3–4', rounds: '', restSets: '', restRounds: '' },
        { id: '2a', pattern: 'conditioning', exercise: 'Run 2:00 (500m goal)', reps: '2 min', sets: '3–4', rounds: 'Triset 2', restSets: 'Smooth transitions', restRounds: '2 min after 2c' },
        { id: '2b', pattern: 'hinge', exercise: 'Swing', reps: '12–15', sets: '3–4', rounds: '', restSets: '', restRounds: '' },
        { id: '2c', pattern: 'push', exercise: 'Bench press', reps: '12–15', sets: '3–4', rounds: '', restSets: '', restRounds: '' }
      ],
      "hybrid-day2": [
        { id: 'A1', pattern: 'squat', exercise: 'Back eða Front Squat', reps: '5–6 (fast concentric)', sets: '3–4', rounds: 'Pairing A', restSets: '0–15s into A2', restRounds: '2–3 min after A2' },
        { id: 'A2', pattern: 'power', exercise: 'Bodyweight Squat Jump', reps: '6–8', sets: '3–4', rounds: '', restSets: '', restRounds: '' },
        { id: 'B1', pattern: 'push', exercise: 'Standing Overhead Press', reps: '5–6', sets: '3–4', rounds: 'Pairing B', restSets: '0–15s into B2', restRounds: '2–3 min after B2' },
        { id: 'B2', pattern: 'power', exercise: 'Med Ball Chest Pass eða Plyo Push-up', reps: '6–8', sets: '3–4', rounds: '', restSets: '', restRounds: '' },
        { id: 'C1', pattern: 'core', exercise: 'Side plank', reps: '30–45s/side', sets: '2', rounds: 'Optional core', restSets: '30–45s', restRounds: '' },
        { id: 'C2', pattern: 'core', exercise: 'Pallof press', reps: '10–12/side', sets: '2', rounds: '', restSets: '30–45s', restRounds: '' }
      ],
      "hybrid-day3": [
        { id: '1a', pattern: 'conditioning', exercise: 'Run 2:00 (500m goal)', reps: '2 min', sets: '3–4', rounds: 'Triset 1', restSets: 'Smooth transitions', restRounds: '2 min after 1c' },
        { id: '1b', pattern: 'push', exercise: 'Thruster', reps: '12–15', sets: '3–4', rounds: '', restSets: '', restRounds: '' },
        { id: '1c', pattern: 'pull', exercise: 'Inverted row', reps: '12–15', sets: '3–4', rounds: '', restSets: '', restRounds: '' },
        { id: '2a', pattern: 'conditioning', exercise: 'Run 2:00 (500m goal)', reps: '2 min', sets: '3–4', rounds: 'Triset 2', restSets: 'Smooth transitions', restRounds: '2 min after 2c' },
        { id: '2b', pattern: 'hinge', exercise: 'Swing', reps: '12–15', sets: '3–4', rounds: '', restSets: '', restRounds: '' },
        { id: '2c', pattern: 'pull', exercise: 'Renegade row + push-up', reps: '15–20 total (each arm + push-ups)', sets: '3–4', rounds: '', restSets: '', restRounds: '' }
      ],
      "hybrid-day4": [
        { id: 'A1', pattern: 'hinge', exercise: 'Deadlift eða RDL', reps: '5–6', sets: '3–4', rounds: 'Pairing A', restSets: '0–15s into A2', restRounds: '2–3 min after A2' },
        { id: 'A2', pattern: 'power', exercise: 'Broad jump eða Heavy KB Swing', reps: '6–8', sets: '3–4', rounds: '', restSets: '', restRounds: '' },
        { id: 'B1', pattern: 'pull', exercise: 'Weighted Pull-up eða Heavy Row', reps: '5–6', sets: '3–4', rounds: 'Pairing B', restSets: '0–15s into B2', restRounds: '2–3 min after B2' },
        { id: 'B2', pattern: 'pull', exercise: 'Explosive Band Row eða Chest-Supported DB Row (fast)', reps: '6–8', sets: '3–4', rounds: '', restSets: '', restRounds: '' },
        { id: 'Fin', pattern: 'carry', exercise: 'Farmer Carry + Hollow Hold', reps: '30–40s carry + 20–30s hold', sets: '2–3', rounds: 'Optional finisher', restSets: '45–60s', restRounds: '' }
      ],
      "contrast-2day-1": [
        { id: '1a', pattern: 'hinge', exercise: 'Trap Bar Deadlift', reps: '3–5', sets: '2 + 1 iso', vt: '0.80', cut: '0.68', drop: '15%', percent: '80%', restSet: '20 sec' },
        { id: '1b', pattern: 'power', exercise: 'Drop jumps', reps: '2–3', sets: '3', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'N/A', restSet: '120 sec' },
        { id: '2a', pattern: 'push', exercise: 'Bench press', reps: '3–5', sets: '2 + 1 iso', vt: '0.65', cut: '0.55', drop: '15%', percent: '80%', restSet: '20 sec' },
        { id: '2b', pattern: 'push', exercise: 'Plyo push-up', reps: '3–5', sets: '3', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'N/A', restSet: '20 sec' },
        { id: '2c', pattern: 'pull', exercise: 'Chin ups', reps: '3–5', sets: '3', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'N/A', restSet: '120 sec' },
        { id: '3a', pattern: 'squat', exercise: 'Box Step up', reps: '5 each leg', sets: '1 to 2', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '65%', restSet: '30 sec' },
        { id: '3b', pattern: 'hinge', exercise: 'Single leg RDL + isometric hamstring', reps: '5 each leg', sets: '1 + 1 iso', vt: 'Fast as possible', cut: 'Fast as possible', drop: 'Fast as possible', percent: '80%', restSet: '30 sec' },
        { id: '3c', pattern: 'push', exercise: 'Push press', reps: '5', sets: '2', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '65%', restSet: '90 sec' },
        { id: '4a', pattern: 'core', exercise: 'Copenhagen adductor', reps: '6–8 each leg', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '15 sec' },
        { id: '4b', pattern: 'core', exercise: 'Pallof press', reps: '8–10 each side', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '30 sec' }
      ],
      "contrast-2day-2": [
        { id: '1a', pattern: 'squat', exercise: 'B. Split hnébeygja + Iso', reps: '3–5 each leg', sets: '2 + 1 iso', vt: '0.80', cut: '0.68', drop: '15%', percent: '80%', restSet: '20 sec' },
        { id: '1b', pattern: 'power', exercise: 'B. Split jump', reps: '2–3 each leg', sets: '3', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'N/A', restSet: '120 sec' },
        { id: '2a', pattern: 'push', exercise: 'Shoulder press', reps: '3–5', sets: '2', vt: '0.65', cut: '0.55', drop: '15%', percent: '80%', restSet: '20 sec' },
        { id: '2b', pattern: 'power', exercise: 'MB Chest pass', reps: '3–5', sets: '2', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'N/A', percent: 'N/A', restSet: '20 sec' },
        { id: '2c', pattern: 'pull', exercise: 'Supported row', reps: '3–5', sets: '2', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'N/A', restSet: '120 sec' },
        { id: '3a', pattern: 'hinge', exercise: 'Hip thrust', reps: '5', sets: '2', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '65%', restSet: '30 sec' },
        { id: '3b', pattern: 'squat', exercise: 'Adductor lunge', reps: '5 each leg', sets: '2', vt: 'Fast as possible', cut: 'Fast as possible', drop: 'Fast as possible', percent: '80%', restSet: '30 sec' },
        { id: '3c', pattern: 'push', exercise: 'DB Bench press', reps: '5', sets: '2', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '65%', restSet: '90 sec' },
        { id: '4a', pattern: 'core', exercise: 'R. Overhead side plank', reps: '6–8 each side', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '30 sec' },
        { id: '4b', pattern: 'core', exercise: 'R. Overhead  plank', reps: '10', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '30 sec' },
        { id: '4c', pattern: 'core', exercise: 'Pallof press', reps: '8–10 each side', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '30 sec' },
        { id: '5', pattern: 'hinge', exercise: 'Nordic hamstring', reps: '4–6', sets: '1', vt: 'Slow', cut: 'N/A', drop: 'N/A', percent: 'N/A', restSet: '90 sec' }
      ],
      "iso-contrast-day1": [
        { id: '1a', pattern: 'PIMA Iso', exercise: 'PIMA Back Squat (overcoming @ ~90° knee)', reps: '3–5s', sets: '3–4', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '20–30s' },
        { id: '1b', pattern: 'squat', exercise: 'Dynamic Back Squat', reps: '2–3', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '60–70%', restSet: '30–45s' },
        { id: '1c', pattern: 'power', exercise: 'Countermovement Jump', reps: '2–3', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '90s' },
        { id: '2a', pattern: 'PIMA Iso', exercise: 'PIMA Ankle Plantarflexion', reps: '3–4s', sets: '3', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '15–20s' },
        { id: '2b', pattern: 'power', exercise: 'Pogos or Low Hops (stiff)', reps: '10–15', sets: '3', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '60–90s' },
        { id: '3a', pattern: 'core', exercise: 'Loaded carry eða plank variant', reps: '30–45s', sets: '2–3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' }
      ],
      "iso-contrast-day2": [
        { id: '1a', pattern: 'PIMA Iso', exercise: 'PIMA Bench Press (pinned off chest)', reps: '3–5s', sets: '3–4', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '20–30s' },
        { id: '1b', pattern: 'push', exercise: 'Dynamic Bench Press', reps: '2–3', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '55–65%', restSet: '30–45s' },
        { id: '1c', pattern: 'power', exercise: 'Med Ball Chest Pass', reps: '3–5', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '90s' },
        { id: '2a', pattern: 'PIMA Iso', exercise: 'PIMA Row Pull (fixed bar/cable)', reps: '3–4s', sets: '3', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '20s' },
        { id: '2b', pattern: 'pull', exercise: 'Explosive Row eða Slam', reps: '3–5', sets: '3', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '60–90s' },
        { id: '3a', pattern: 'core', exercise: 'Anti-rotation press eða carry', reps: '8–12/side eða 20–30s', sets: '2–3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' }
      ],
      "iso-contrast-day3": [
        { id: '1a', pattern: 'PIMA Iso', exercise: 'PIMA Split-Stance Push', reps: '3–5s/side', sets: '3–4', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '20–30s' },
        { id: '1b', pattern: 'squat', exercise: 'Dynamic Split Squat eða Step-Up', reps: '2–3/side', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '30–45s' },
        { id: '1c', pattern: 'power', exercise: 'Sprint (10–20 m) eða Bounds', reps: '10–20 m eða 3–5 contacts', sets: '3–4', vt: 'Max intent', cut: '', drop: 'Speed decreases', percent: '', restSet: '90–120s' },
        { id: '2a', pattern: 'PIMA Iso', exercise: 'PIMA Hip Extension (deadlift angle)', reps: '3–4s', sets: '3', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '20s' },
        { id: '2b', pattern: 'power', exercise: 'Broad Jump eða KB Swing', reps: '2–4', sets: '3', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '90s' },
        { id: '3a', pattern: 'core', exercise: 'Marching carry eða crawl', reps: '20–30s', sets: '2–3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' }
      ],
      "iso-contrast-4day-1": [
        { id: '1a', pattern: 'PIMA Iso', exercise: 'PIMA Back Squat (pins @ ~90°)', reps: '3–5s', sets: '3–4', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '20–30s' },
        { id: '1b', pattern: 'squat', exercise: 'Dynamic Back Squat', reps: '2–3', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '60–70%', restSet: '30–45s' },
        { id: '1c', pattern: 'power', exercise: 'Countermovement Jump', reps: '2–3', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '90s' },
        { id: '2a', pattern: 'PIMA Iso', exercise: 'PIMA Ankle Plantarflexion', reps: '3–4s', sets: '3', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '15–20s' },
        { id: '2b', pattern: 'power', exercise: 'Pogos eða Low Hops', reps: '10–15', sets: '3', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '60–90s' },
        { id: '3a', pattern: 'core', exercise: 'Loaded carry eða plank', reps: '30–45s', sets: '2–3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' }
      ],
      "iso-contrast-4day-2": [
        { id: '1a', pattern: 'PIMA Iso', exercise: 'PIMA Bench Press (pinned off chest)', reps: '3–5s', sets: '3–4', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '20–30s' },
        { id: '1b', pattern: 'push', exercise: 'Dynamic Bench Press', reps: '2–3', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '55–65%', restSet: '30–45s' },
        { id: '1c', pattern: 'power', exercise: 'Med Ball Chest Pass', reps: '3–5', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '90s' },
        { id: '2a', pattern: 'PIMA Iso', exercise: 'PIMA Row Pull (fixed bar/cable)', reps: '3–4s', sets: '3', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '20s' },
        { id: '2b', pattern: 'pull', exercise: 'Explosive Row eða Slam', reps: '3–5', sets: '3', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '60–90s' },
        { id: '3a', pattern: 'core', exercise: 'Anti-rotation press eða carry', reps: '8–12/side eða 20–30s', sets: '2–3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' }
      ],
      "iso-contrast-4day-3": [
        { id: '1a', pattern: 'PIMA Iso', exercise: 'PIMA Hip Extension (deadlift angle)', reps: '3–4s', sets: '3–4', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '20–30s' },
        { id: '1b', pattern: 'hinge', exercise: 'Trap Bar Deadlift eða RDL (dynamic)', reps: '3–5', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '60–75%', restSet: '45–60s' },
        { id: '1c', pattern: 'power', exercise: 'Broad Jump eða KB Swing', reps: '2–4', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '90s' },
        { id: '2a', pattern: 'PIMA Iso', exercise: 'Knee Iso-Push (Extension)', reps: '3–4s', sets: '2–3', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '20s' },
        { id: '2b', pattern: 'pull', exercise: 'Hamstring curl eða Nordic (low volume)', reps: '4–6', sets: '2–3', vt: 'Controlled', cut: '', drop: 'N/A', percent: '', restSet: '60–90s' },
        { id: '3a', pattern: 'core', exercise: 'Marching carry eða crawl', reps: '20–30s', sets: '2–3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' }
      ],
      "iso-contrast-4day-4": [
        { id: '1a', pattern: 'PIMA Iso', exercise: 'PIMA Split-Stance Push (rear foot elevated eða staggered)', reps: '3–5s/side', sets: '3–4', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '20–30s' },
        { id: '1b', pattern: 'squat', exercise: 'Dynamic Split Squat eða Step-Up', reps: '2–3/side', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '30–45s' },
        { id: '1c', pattern: 'power', exercise: 'Sprint 10–20 m eða Bounds (3–5 contacts)', reps: '1', sets: '3–4', vt: 'Max intent', cut: '', drop: 'Speed decreases', percent: '', restSet: '90–120s' },
        { id: '2a', pattern: 'PIMA Iso', exercise: 'PIMA Ankle Plantarflexion', reps: '3–4s', sets: '2–3', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '15–20s' },
        { id: '2b', pattern: 'power', exercise: 'Pogos eða Low Hops', reps: '8–12', sets: '2–3', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '60–90s' },
        { id: '3a', pattern: 'core', exercise: 'Anti-rotation carry eða plank', reps: '20–30s', sets: '2–3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' }
      ],
      "french-iso3-day1": [
        { id: 'A1', pattern: 'PIMA Iso', exercise: 'PIMA Back Squat (pins @ ~90°)', reps: '3–5s', sets: '3–4', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '20–30s' },
        { id: 'A2', pattern: 'squat', exercise: 'Back Squat (dynamic)', reps: '2–3', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '60–70%', restSet: '30–45s' },
        { id: 'A3', pattern: 'power', exercise: 'Jump Squat eða CMJ', reps: '2–3', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '60–90s' },
        { id: 'A4', pattern: 'power', exercise: 'Bounds eða Heiden', reps: '3–4', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '90s' },
        { id: 'B1', pattern: 'core', exercise: 'Loaded carry eða plank', reps: '20–30s', sets: '2–3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' }
      ],
      "french-iso3-day2": [
        { id: 'A1', pattern: 'PIMA Iso', exercise: 'PIMA Bench Press (pinned off chest)', reps: '3–5s', sets: '3–4', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '20–30s' },
        { id: 'A2', pattern: 'push', exercise: 'Bench Press (dynamic)', reps: '2–3', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '55–65%', restSet: '30–45s' },
        { id: 'A3', pattern: 'power', exercise: 'Plyo Push-up eða Med Ball Chest Pass', reps: '3–5', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '60–90s' },
        { id: 'A4', pattern: 'pull', exercise: 'Explosive Row eða Slam', reps: '3–5', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '90s' },
        { id: 'B1', pattern: 'core', exercise: 'Anti-rotation press eða carry', reps: '8–12/side', sets: '2–3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' }
      ],
      "french-iso3-day3": [
        { id: 'A1', pattern: 'PIMA Iso', exercise: 'PIMA Hip Extension (deadlift angle)', reps: '3–5s', sets: '3–4', vt: 'Max intent', cut: 'N/A', drop: 'N/A', percent: '', restSet: '20–30s' },
        { id: 'A2', pattern: 'hinge', exercise: 'Trap Bar Deadlift eða RDL (dynamic)', reps: '2–3', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '60–75%', restSet: '45–60s' },
        { id: 'A3', pattern: 'power', exercise: 'Broad Jump eða KB Swing', reps: '2–4', sets: '3–4', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '90s' },
        { id: 'A4', pattern: 'power', exercise: 'Sprint 10–20 m eða Bounds', reps: '1', sets: '3–4', vt: 'Max intent', cut: '', drop: 'Speed decreases', percent: '', restSet: '90–120s' },
        { id: 'B1', pattern: 'core', exercise: 'Marching carry eða crawl', reps: '20–30s', sets: '2–3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' }
      ],
      "contrast-custom-day1": [
        { id: 'A1', pattern: 'hinge', exercise: 'Deadlift', reps: '3', sets: '2–4', vt: '0.85', cut: '0.77', drop: '10%', percent: '', restSet: '120–180s' },
        { id: 'A2', pattern: 'hinge', exercise: 'Heavy Sled Push/Pull', reps: '20 m x 1', sets: '2–4', vt: '0.85', cut: '0.77', drop: '10%', percent: '', restSet: '90–120s' },
        { id: 'B1', pattern: 'pull', exercise: 'Weighted Chin-up eða Lat Pulldown', reps: '6–8', sets: '4', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60–90s' },
        { id: 'B2', pattern: 'push', exercise: 'DB Bench Press eða Landmine Press', reps: '8', sets: '4', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60–90s' },
        { id: 'C1', pattern: 'pull', exercise: 'Chest-Supported Row', reps: '10–12', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60s' },
        { id: 'C2', pattern: 'push', exercise: 'Incline DB Press eða Push-up', reps: '12', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60s' },
        { id: 'D1', pattern: 'core', exercise: 'Pallof Press Walkout', reps: '8/side', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' },
        { id: 'D2', pattern: 'core', exercise: 'Low Bear Crawl (controlled)', reps: '20–30s', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' }
      ],
      "contrast-custom-day2": [
        { id: 'A1', pattern: 'squat', exercise: 'Back eða Front Squat', reps: '3', sets: '2–4', vt: '0.85', cut: '0.77', drop: '10%', percent: '', restSet: '120–180s' },
        { id: 'A2', pattern: 'power', exercise: 'Box Jump (stífur box)', reps: '3', sets: '2–4', vt: '0.85', cut: '0.77', drop: '10%', percent: '', restSet: '90–120s' },
        { id: 'B1', pattern: 'pull', exercise: '1-arm DB Row eða Chest-Supported Row', reps: '8/side', sets: '4', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60–90s' },
        { id: 'B2', pattern: 'push', exercise: 'Landmine Press eða Overhead Press', reps: '8', sets: '4', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60–90s' },
        { id: 'C1', pattern: 'pull', exercise: 'Seated Cable Row eða Band Row', reps: '10–12', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60s' },
        { id: 'C2', pattern: 'push', exercise: 'Push-up (tempo 30X0) eða DB Bench', reps: '12', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60s' },
        { id: 'D1', pattern: 'core', exercise: 'Side Plank Row (band/cable)', reps: '8/side', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' },
        { id: 'D2', pattern: 'core', exercise: 'Stir-the-Pot á bolta', reps: '8–10 hringir/átt', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' }
      ],
      "contrast-custom-day3": [
        { id: 'A1', pattern: 'hinge', exercise: 'Trap Bar Deadlift (split stance ef vill)', reps: '4–6', sets: '2–4', vt: '0.85', cut: '0.77', drop: '10%', percent: '', restSet: '120–180s' },
        { id: 'A2', pattern: 'hinge', exercise: 'Sled March (miðlungs þyngd)', reps: '20 m x 1', sets: '2–4', vt: '0.85', cut: '0.77', drop: '10%', percent: '', restSet: '90–120s' },
        { id: 'B1', pattern: 'pull', exercise: 'Pull-up/Chin-up eða Pulldown', reps: '6–8', sets: '4', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60–90s' },
        { id: 'B2', pattern: 'push', exercise: 'DB Incline Press eða Landmine Press', reps: '8', sets: '4', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60–90s' },
        { id: 'C1', pattern: 'hinge', exercise: 'Single-leg RDL (DB eða KB)', reps: '8/side', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60–90s' },
        { id: 'C2', pattern: 'pull', exercise: 'Face Pull eða Band Pull-Apart', reps: '15', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60s' },
        { id: 'D1', pattern: 'core', exercise: 'Half-Kneeling Pallof Press (anti-rotation)', reps: '10/side', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' },
        { id: 'D2', pattern: 'core', exercise: 'Offset Front Rack March (KB/DB)', reps: '20–30s/side', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' }
      ],
      "contrast-custom-day4": [
        { id: 'A1', pattern: 'squat', exercise: 'Bulgarian Split Squat eða Box Step-Up', reps: '6–8/side', sets: '2–4', vt: '0.85', cut: '0.77', drop: '10%', percent: '', restSet: '90–120s' },
        { id: 'A2', pattern: 'power', exercise: 'Box Jump eða Heiden', reps: '3–4', sets: '2–4', vt: '0.85', cut: '0.77', drop: '10%', percent: '', restSet: '60–90s' },
        { id: 'B1', pattern: 'pull', exercise: 'Single-Arm Row (band/cable/DB)', reps: '10/side', sets: '4', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60–90s' },
        { id: 'B2', pattern: 'push', exercise: 'Overhead Press eða Landmine Press', reps: '8', sets: '4', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60–90s' },
        { id: 'C1', pattern: 'hinge', exercise: 'Glute Bridge eða Hip Thrust', reps: '10–12', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60–90s' },
        { id: 'C2', pattern: 'push', exercise: 'Scap Push-up eða Push-up', reps: '12–15', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '60s' },
        { id: 'D1', pattern: 'core', exercise: 'Side Plank með reach', reps: '20–30s/side', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' },
        { id: 'D2', pattern: 'core', exercise: 'Pallof Press (miðlungs/þyngd)', reps: '10/side', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' }
      ],
      "contrast-football-day1": [
        { id: 'A1', pattern: 'squat', exercise: 'Back eða Front Squat (heavy)', reps: '3–4', sets: '3–4', vt: '0.65', cut: '0.58', drop: '10%', percent: '80–85%', restSet: '120s' },
        { id: 'A2', pattern: 'power', exercise: 'Box Jump eða Jump Squat', reps: '4–6', sets: '3–4', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'Bodyweight / light', restSet: '90s' },
        { id: 'B1', pattern: 'push', exercise: 'DB Bench Press (horizontal)', reps: '6–8', sets: '3', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '75–90s' },
        { id: 'B2', pattern: 'pull', exercise: 'Chest-Supported Row', reps: '8–10', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '75–90s' },
        { id: 'C1', pattern: 'hinge', exercise: 'RDL + Iso Hamstring Bridge (3–5s per rep)', reps: '6–8', sets: '2–3', vt: '', cut: '', drop: 'N/A', percent: 'RPE 7–8', restSet: '90s' },
        { id: 'D1', pattern: 'core', exercise: 'Dead Bug (anti-extension)', reps: '8/side', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45s' },
        { id: 'D2', pattern: 'core', exercise: 'Pallof Press (anti-rotation)', reps: '10/side', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45s' },
        { id: 'D3', pattern: 'core', exercise: 'Side Plank með reach (lateral)', reps: '30s/side', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45s' }
      ],
      "contrast-football-day2": [
        { id: 'A1', pattern: 'push', exercise: 'Standing Overhead Press (heavy)', reps: '3–5', sets: '3–4', vt: '0.65', cut: '0.58', drop: '10%', percent: '80–85%', restSet: '120s' },
        { id: 'A2', pattern: 'power', exercise: 'Med Ball Push-Press Throw', reps: '4–6', sets: '3–4', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'Light MB', restSet: '90s' },
        { id: 'B1', pattern: 'pull', exercise: 'Weighted Pull-Up (vertical)', reps: '3–4', sets: '3–4', vt: '0.70', cut: '0.63', drop: '10%', percent: 'Added load', restSet: '120s' },
        { id: 'B2', pattern: 'power', exercise: 'Explosive Inverted Row', reps: '4–6', sets: '3–4', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'Bodyweight', restSet: '90s' },
        { id: 'C1', pattern: 'hinge', exercise: 'Nordic Hamstring', reps: '3–5', sets: '2', vt: '', cut: '', drop: 'N/A', percent: 'Bodyweight', restSet: '120s' },
        { id: 'C2', pattern: 'core', exercise: 'Copenhagen Adduction (short/long lever)', reps: '6–8/side', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '75–90s' },
        { id: 'D1', pattern: 'core', exercise: 'RKC Plank (anti-extension)', reps: '20–30s', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45s' },
        { id: 'D2', pattern: 'core', exercise: 'Half-Kneeling Pallof Press (anti-rotation)', reps: '8–10/side', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45s' },
        { id: 'D3', pattern: 'core', exercise: 'Side Plank with Abduction (lateral)', reps: '8/side', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45s' }
      ],
      "contrast-football-day3": [
        { id: 'A1', pattern: 'hinge', exercise: 'Trap Bar Deadlift (heavy)', reps: '3–5', sets: '3–4', vt: '0.70', cut: '0.63', drop: '10%', percent: '80–85%', restSet: '120–150s' },
        { id: 'A2', pattern: 'power', exercise: 'Broad Jump eða KB Swing (explosive)', reps: '3–5', sets: '3–4', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'Bodyweight / light', restSet: '90s' },
        { id: 'B1', pattern: 'push', exercise: 'Landmine Press (vertical)', reps: '6–8', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '75–90s' },
        { id: 'B2', pattern: 'pull', exercise: 'Chin-Up eða Lat Pulldown', reps: '6–8', sets: '3', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '75–90s' },
        { id: 'C1', pattern: 'squat', exercise: 'Bulgarian Split Squat', reps: '6/leg', sets: '3', vt: '', cut: '', drop: 'N/A', percent: 'RPE 7–8', restSet: '90s' },
        { id: 'C2', pattern: 'hinge', exercise: 'Isometric Hamstring Bridge (heels on box)', reps: '20–30s', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '75–90s' },
        { id: 'D1', pattern: 'core', exercise: 'Plank Walk-out (anti-extension)', reps: '6–8', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45s' },
        { id: 'D2', pattern: 'core', exercise: 'Pallof Press Walk (anti-rotation)', reps: '8/side', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45s' },
        { id: 'D3', pattern: 'core', exercise: 'Side Plank + Row eða Carry (lateral)', reps: '30s/side', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45s' }
      ],
      "contrast-football-day4": [
        { id: 'A1', pattern: 'push', exercise: 'Bench Press (heavy)', reps: '3–5', sets: '3–4', vt: '0.65', cut: '0.58', drop: '10%', percent: '80–85%', restSet: '120s' },
        { id: 'A2', pattern: 'power', exercise: 'Plyometric Push-Up', reps: '4–6', sets: '3–4', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'Bodyweight', restSet: '90s' },
        { id: 'B1', pattern: 'pull', exercise: 'Bent-Over Row (heavy)', reps: '4–6', sets: '3–4', vt: '0.75', cut: '0.68', drop: '10%', percent: '75–80%', restSet: '120s' },
        { id: 'B2', pattern: 'power', exercise: 'Band-Assisted Inverted Row (speed)', reps: '5–8', sets: '3–4', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: 'Assisted', restSet: '90s' },
        { id: 'C1', pattern: 'hinge', exercise: 'Nordic Hamstring', reps: '3–5', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '120s' },
        { id: 'C2', pattern: 'core', exercise: 'Copenhagen Adduction (short/long lever)', reps: '6–8/side', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '75–90s' },
        { id: 'D1', pattern: 'core', exercise: 'Dead Bug (anti-extension)', reps: '8/side', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45s' },
        { id: 'D2', pattern: 'core', exercise: 'Pallof Press Walkout (anti-rotation)', reps: '8–10/side', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45s' },
        { id: 'D3', pattern: 'core', exercise: 'Suitcase Carry', reps: '20–30 m/side', sets: '2', vt: '', cut: '', drop: 'N/A', percent: '', restSet: '45–60s' }
      ]
    };
    programData["french-rot-day1"] = [
      { id: '1', pattern: 'power', exercise: 'Split Squat Overcoming Iso', reps: '7s/side', sets: '1', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '' },
      { id: '2', pattern: 'power', exercise: 'Rotational Med Ball Shotput (6lb)', reps: '3/side', sets: '1', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '' },
      { id: '3', pattern: 'power', exercise: 'Proteus Shotput (30% or 3-4 RPE)', reps: '3/side', sets: '1', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '30%', restSet: '' },
      { id: '4', pattern: 'power', exercise: 'Accelerated Rotational Med Ball Shotput (6lb + band)', reps: '3/side', sets: '1', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '' }
    ];
    programData["french-rot-day2"] = [
      { id: '1', pattern: 'squat', exercise: 'Landmine Lateral Lunge (85% 1RM w/070 Tempo)', reps: '1/side', sets: '1', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '85%', restSet: '' },
      { id: '2', pattern: 'power', exercise: 'Heiden (BW)', reps: '3/side', sets: '1', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '' },
      { id: '3', pattern: 'power', exercise: 'Band-Resisted Heiden (BW+Band)', reps: '3/side', sets: '1', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '' },
      { id: '4', pattern: 'power', exercise: 'Accelerated Heiden (BW + Band)', reps: '3/side', sets: '1', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '' }
    ];
    programData["french-rot-day3"] = [
      { id: '1', pattern: 'push', exercise: '1-arm DB Bench Press w/Bridge (85% 1RM w/330 Tempo)', reps: '2/side', sets: '1', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '85%', restSet: '' },
      { id: '2', pattern: 'power', exercise: 'Med Ball Drop Chest Pass (6lb)', reps: '4', sets: '1', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '' },
      { id: '3', pattern: 'push', exercise: 'Rotational Landmine Press (30% or 3-4 RPE)', reps: '3/side', sets: '1', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '30%', restSet: '' },
      { id: '4', pattern: 'power', exercise: 'Accelerated Rotational Med Ball Shotput (6lb + band)', reps: '3/side', sets: '1', vt: 'Fast as possible', cut: 'Speed decreases', drop: 'Speed decreases', percent: '', restSet: '' }
    ];

    let programState = JSON.parse(JSON.stringify(programData));
    const baseExerciseOptions = [
      // upper
      'Bench press', 'Bench press throw', 'Push press', 'Landmine press', 'Plyo push-up',
      'Chin-up', 'Pull ups', 'Band-assisted pull-up', '1-arm dumbbell row', 'Chest-supported row',
      'Med ball rotational throw', 'Med ball oblique throw', 'Scap push-up', 'Face pull', 'Band pull-apart',
      // lower
      'Deadlift', 'Trap Bar Deadlift', 'Trap Bar Deadlift (Split Stance)', 'Barbell Squat',
      'Barbell Bulgarian Split Squat', 'Jump Shrugs', 'Mid-thigh clean pull', 'Mid-thigh snatch pull',
      'RDL', 'Single-leg RDL', 'Box Step Up', 'Bulgarian Split Squat', 'Barbell Hip Thrust', 'Nordic Hamstring',
      // plyo/ballistic
      'Drop jumps', 'MB Moye Start', 'DB Snatch', 'Trap-bar jump',
      // core
      'Pallof press', 'Pallof press walkout', 'Half-kneeling Pallof press', 'Side plank', 'Side plank row (band eða cable)',
      'R. Overhead side plank', 'R. Overhead plank', 'Dead bug', 'Dead bug með band yfir hné', 'Birddog',
      'Low bear crawl', 'Hollow hold', 'Farmer’s carry', 'Suitcase carry', 'Offset front rack march', 'Cable chop/lift',
      'Stir-the-pot á bolta',
      // iso
      'Wall sit (60s)', 'Split squat iso hold (bottom)', 'Pallof press iso (long hold)',
      'Side plank iso (long hold)', 'Glute bridge iso (long hold)', 'Mid-thigh pull iso (3–5s)',
      'Trap bar iso hold', 'Bench press iso hold', 'Split squat iso (mid-range, 3–5s)', 'Calf raise iso (ramp or explosive)',
      'Ankle Isometric Hold – Long Length', 'Ankle Isometric Hold – Mid-Range',
      'Knee Isometric Hold – Long Length', 'Knee Isometric Hold – Mid-Range',
      'Hip Isometric Hold – Long Length', 'Hip Isometric Hold – Mid-Range',
      'Isometric Mid-Stance Hold (Sprint Position)', 'Isometric Split-Stance Hold',
      'Isometric Squat Hold (Specific Joint Angle)', 'Isometric Lunge Hold',
      'Isometric Single-Leg Support Hold', 'Seated Plantarflexion Iso Hold',
      'Standing Plantarflexion Iso Hold', 'Soleus Isometric Hold (Bent Knee)',
      'Tibialis Anterior Iso Hold', 'Inversion Isometric Hold', 'Eversion Isometric Hold',
      'Ankle Iso-Push (Plantarflexion)', 'Ankle Iso-Push (Dorsiflexion)',
      'Knee Iso-Push (Extension)', 'Knee Iso-Push (Flexion)',
      'Hip Iso-Push (Extension)', 'Hip Iso-Push (Flexion)',
      'Hip Iso-Push (Abduction)', 'Hip Iso-Push (Adduction)',
      'Isometric Squat Push into Pins', 'Isometric Split-Stance Push'
    ];
    const programExerciseOptions = Object.values(programData).flatMap(list => list.map(row => row.exercise));
    const exerciseOptionsMaster = Array.from(new Set([...baseExerciseOptions, ...programExerciseOptions])).sort();
    const velocityOptions = ['Fast as possible', 'Moderate Velocity', 'Slow & Controlled', ...Array.from({ length: Math.floor((1.30 - 0.15) / 0.05) + 1 }, (_, i) => (0.15 + i * 0.05).toFixed(2))];
    const dropOptions = ['Speed decreases', 'N/A', ...Array.from({ length: Math.floor((40 - 5) / 5) + 1 }, (_, i) => `${5 + i * 5}%`)];
    const videoLinks = {
      'PIMA Back Squat (pins @ ~90°)': 'https://www.youtube.com/results?search_query=isometric+back+squat+pins',
      'Back Squat (dynamic)': 'https://www.youtube.com/results?search_query=dynamic+back+squat+speed',
      'Jump Squat eða CMJ': 'https://www.youtube.com/results?search_query=countermovement+jump+technique',
      'Bounds eða Heiden': 'https://www.youtube.com/results?search_query=lateral+bound+heiden+drill',
      'PIMA Bench Press (pinned off chest)': 'https://www.youtube.com/results?search_query=isometric+bench+press+pins',
      'Bench Press (dynamic)': 'https://www.youtube.com/results?search_query=dynamic+bench+press+speed',
      'Plyo Push-up eða Med Ball Chest Pass': 'https://www.youtube.com/results?search_query=plyo+push+up+med+ball+chest+pass',
      'Explosive Row eða Slam': 'https://www.youtube.com/results?search_query=explosive+row+band+row+slam',
      'PIMA Hip Extension (deadlift angle)': 'https://www.youtube.com/results?search_query=isometric+deadlift+hold+against+pins',
      'Trap Bar Deadlift eða RDL (dynamic)': 'https://www.youtube.com/results?search_query=trap+bar+deadlift+dynamic',
      'Broad Jump eða KB Swing': 'https://www.youtube.com/results?search_query=broad+jump+technique+kb+swing',
      'Sprint 10–20 m eða Bounds': 'https://www.youtube.com/results?search_query=10m+acceleration+technique+bounds',
      'PIMA Split-Stance Push (rear foot elevated eða staggered)': 'https://www.youtube.com/results?search_query=isometric+split+squat+push+into+pins',
      'Dynamic Split Squat eða Step-Up': 'https://www.youtube.com/results?search_query=dynamic+split+squat+step+up+explosive',
      'PIMA Ankle Plantarflexion': 'https://www.youtube.com/results?search_query=isometric+ankle+plantarflexion+wall',
      'Pogos eða Low Hops': 'https://www.youtube.com/results?search_query=ankle+pogos+plyometrics',
      'Loaded carry eða plank': 'https://www.youtube.com/results?search_query=farmers+carry+plank+variation',
      'Anti-rotation press eða carry': 'https://www.youtube.com/results?search_query=pallof+press+anti+rotation+carry',
      'Marching carry eða crawl': 'https://www.youtube.com/results?search_query=marching+carry+bear+crawl+exercise'
    };

    function getVideoLink(name) {
      if (!name) return '';
      return videoLinks[name] || `https://www.youtube.com/results?search_query=${encodeURIComponent(name)}`;
    }
    const patternOptions = {
      squat: [
        'Goblet squat', 'Front squat', 'Leg press', 'Lunges',
        'Box Step Up (each leg)', 'Bulgarian Split Squat (each leg)', 'Adductor Valslide Lunge (each leg)',
        'Split squat', 'Step up', 'Barbell Squat', 'Barbell Bulgarian Split Squat'
      ],
      hinge: [
        'Deadlift', 'Trap Bar Deadlift', 'Trap Bar Deadlift (Split Stance)',
        'RDL', 'Single-Leg RDL', 'Barbell Hip Thrust', 'Hip thrust', 'Glute bridge', 'Swing', 'KB Swing (heavy)',
        'Standing calf raise', 'Seated calf raise', 'Hamstring curl',
        'Mid-thigh Clean Pull', 'Mid-thigh Snatch Pull', 'Jump Shrugs', 'DB Snatch (each arm)', 'MB Moye Start (each leg)',
        'Nordic hamstring'
      ],
      power: [
        'Jump Shrugs', 'Mid-thigh Clean Pull', 'Mid-thigh Snatch Pull',
        'DB Snatch (each arm)', 'Trap-bar jump', 'Drop Jumps', 'Bodyweight Squat Jump', 'Broad jump', 'Med Ball Chest Pass'
      ],
      push: [
        'Bench Press', 'Bench press', 'Push press', 'Overhead press', 'Standing Overhead Press', 'Landmine press',
        'Plyo push-up', 'Push-ups', 'Thruster'
      ],
      pull: [
        'Chin Ups', 'Chin-up', 'Pull ups', 'Lat pulldown',
        '1-arm dumbbell row', 'Chest-supported row', 'Dumbbell row', 'Pull-ups', 'Inverted row', 'Renegade row + push-up',
        'Weighted Pull-up', 'Heavy Row', 'Explosive Band Row', 'Chest-Supported DB Row (fast)'
      ],
      core: [
        'Pallof press (each side)', 'Pallof press', 'Pallof press walkout',
        'Half-kneeling Pallof press (anti-rotation)', 'R. Overhead side plank (each side)',
        'R. Overhead plank', 'Side plank', 'Side plank row (band eða cable)', 'Planks',
        'Russian twists', 'Roll-outs', 'Stir-the-pot á bolta', 'Dead bug', 'Dead bug með band yfir hné',
        'Birddog', 'Low bear crawl (controlled)', 'Copenhagen adductor (each leg)',
      'MB oblique throw (each side)', 'Offset front rack march', 'Farmer’s carry eða suitcase carry'
      ],
      carry: [
        'Rack carries', 'Suitcase walk'
      ],
      conditioning: [
        'Run 2:00 (500m goal)'
      ],
      'HIMA Iso': [
        'Ankle Isometric Hold – Long Length', 'Ankle Isometric Hold – Mid-Range',
        'Knee Isometric Hold – Long Length', 'Knee Isometric Hold – Mid-Range',
        'Hip Isometric Hold – Long Length', 'Hip Isometric Hold – Mid-Range',
        'Isometric Mid-Stance Hold (Sprint Position)', 'Isometric Split-Stance Hold',
        'Isometric Squat Hold (Specific Joint Angle)', 'Isometric Lunge Hold',
        'Isometric Single-Leg Support Hold', 'Seated Plantarflexion Iso Hold',
        'Standing Plantarflexion Iso Hold', 'Soleus Isometric Hold (Bent Knee)',
        'Tibialis Anterior Iso Hold', 'Inversion Isometric Hold', 'Eversion Isometric Hold'
      ],
      'PIMA Iso': [
        'Mid-thigh pull iso (3–5s)', 'Trap bar iso hold', 'Bench press iso hold',
        'Split squat iso (mid-range, 3–5s)', 'Calf raise iso (ramp or explosive)',
        'Ankle Iso-Push (Plantarflexion)', 'Ankle Iso-Push (Dorsiflexion)',
        'Knee Iso-Push (Extension)', 'Knee Iso-Push (Flexion)',
        'Hip Iso-Push (Extension)', 'Hip Iso-Push (Flexion)',
        'Hip Iso-Push (Abduction)', 'Hip Iso-Push (Adduction)',
        'Isometric Squat Push into Pins', 'Isometric Split-Stance Push'
      ]
    };
    const variantOptions = {
      'garcia-ramos': [],
      'moreno': [
        { value: 'moreno-4x5', label: '4x5 @ 30s' },
        { value: 'moreno-10x2', label: '10x2 @ 10s' }
      ],
      'hansen': [
        { value: 'hansen-6x1', label: '6x1 @ 12s (singles)' },
        { value: 'hansen-3x2', label: '3x2 @ 30s (doubles)' }
      ]
    };
    const exerciseByFocus = {
      upper: [
        'Bench press throw / push press / landmine press',
        'Chin-up eða band-assisted pull-up',
        '1-arm dumbbell row eða chest-supported row',
        'Med ball rotational throw / scoop toss',
        'Scap push-up, face pull, band pull-apart'
      ],
      lower: [
        'Deadlift',
        'Trap Bar Deadlift',
        'Trap Bar Deadlift (Split Stance)',
        'Barbell Squat',
        'Barbell Bulgarian Split Squat'
      ],
      core: [
        'Pallof press (miðlungs/þyngd)',
        'Half-kneeling Pallof press (anti-rotation)',
        'Pallof press walkout',
        'Dead bug eða hollow hold',
        'Dead bug með band yfir hné',
        'Birddog með stöðugleika eða bandi',
        'Low bear crawl (controlled)',
        'Side plank með reach eða lyftu',
        'Side plank row (band eða cable)',
        'Stir-the-pot á bolta',
        'Farmer’s carry eða suitcase carry',
        'Offset front rack march (KB/DB)',
        'Cable chop / lift (hátt → lágt, lágt → hátt)'
      ]
    };
    const bodyIdByProgram = {
      'push': 'push-body',
      'pull': 'pull-body',
      'combo': 'combo-body',
      'french-lower': 'french-lower-body',
      'french-upper': 'french-upper-body',
      'french-hinge': 'french-hinge-body',
      'french-pull': 'french-pull-body',
      'french4-lower': 'french4-lower-body',
      'french4-upper': 'french4-upper-body',
      'french4-hinge': 'french4-hinge-body',
      'french4-pull': 'french4-pull-body',
      'contrast-lower-1': 'contrast-lower-1-body',
      'contrast-lower-2': 'contrast-lower-2-body',
      'contrast-lower-3': 'contrast-lower-3-body',
      'contrast-lower-4': 'contrast-lower-4-body',
      'pot-day-a': 'pot-day-a-body',
      'pot-day-b': 'pot-day-b-body',
      'pot-day-c': 'pot-day-c-body',
      'pot-cluster-day1': 'pot-cluster-day1-body',
      'pot-cluster-day2': 'pot-cluster-day2-body',
      'cv-day1': 'cv-day1-body',
      'cv-day2': 'cv-day2-body',
      'cv-day3': 'cv-day3-body',
      'cv-day4': 'cv-day4-body',
      'lower3-day1': 'lower3-day1-body',
      'lower3-day2': 'lower3-day2-body',
      'lower3-day3': 'lower3-day3-body',
      'hybrid-day1': 'hybrid-day1-body',
      'hybrid-day2': 'hybrid-day2-body',
      'hybrid-day3': 'hybrid-day3-body',
      'hybrid-day4': 'hybrid-day4-body',
      'contrast-2day-1': 'contrast-2day-1-body',
      'contrast-2day-2': 'contrast-2day-2-body',
      'contrast-custom-day1': 'contrast-custom-day1-body',
      'contrast-custom-day2': 'contrast-custom-day2-body',
      'contrast-custom-day3': 'contrast-custom-day3-body',
      'contrast-custom-day4': 'contrast-custom-day4-body',
      'iso-contrast-day1': 'iso-contrast-day1-body',
      'iso-contrast-day2': 'iso-contrast-day2-body',
      'iso-contrast-day3': 'iso-contrast-day3-body',
      'iso-contrast-4day-1': 'iso-contrast-4day-1-body',
      'iso-contrast-4day-2': 'iso-contrast-4day-2-body',
      'iso-contrast-4day-3': 'iso-contrast-4day-3-body',
      'iso-contrast-4day-4': 'iso-contrast-4day-4-body',
      'french-iso3-day1': 'french-iso3-day1-body',
      'french-iso3-day2': 'french-iso3-day2-body',
      'french-iso3-day3': 'french-iso3-day3-body',
      'french-rot-day1': 'french-rot-day1-body',
      'french-rot-day2': 'french-rot-day2-body',
      'french-rot-day3': 'french-rot-day3-body'
      ,'contrast-football-day1': 'contrast-football-day1-body'
      ,'contrast-football-day2': 'contrast-football-day2-body'
      ,'contrast-football-day3': 'contrast-football-day3-body'
      ,'contrast-football-day4': 'contrast-football-day4-body'
    };

    function createEmptyRoundRow() {
      return { id: '', pattern: '', exercise: '', reps: '', sets: '', rounds: '', restSets: '', restRounds: '' };
    }

    function pickExercise(pattern, idx = 0) {
      const list = mostUsedExercises[pattern] || [''];
      return list[idx % list.length];
    }

    function buildBlockRows(type, blockNumber, templateKey, useVelocity, dayPattern) {
      const label = (idx) => `${blockNumber}${String.fromCharCode(65 + idx)}`;
      const patterns = builderTemplates[templateKey] || ['squat', 'hinge'];
      const primary = dayPattern || patterns[0] || 'squat';
      const repText = useVelocity ? '5–8 (hraði; stoppa við 15–20% VL)' : '8–12';
      const rest = '60–90s';
      if (type === 'giant') {
        return [
          { id: label(0), pattern: primary, exercise: pickExercise(primary, blockNumber), reps: '2–3 (þungt)', sets: '3–4', rounds: '', restSets: rest, restRounds: '', vt: useVelocity ? '0.75' : '' },
          { id: label(1), pattern: 'power', exercise: 'Plyo eða hopps (líkt mynstur)', reps: '3–5', sets: '3–4', rounds: '', restSets: '45–90s', restRounds: '', vt: useVelocity ? '1.00' : '' },
          { id: label(2), pattern: 'power', exercise: 'Loaded power (létt stangir/KB/MB)', reps: '3–5', sets: '3–4', rounds: '', restSets: '45–90s', restRounds: '', vt: useVelocity ? '0.85' : '' },
          { id: label(3), pattern: 'power', exercise: 'Assisted eða band-velocity', reps: '3–5', sets: '3–4', rounds: '', restSets: '90–120s', restRounds: '', vt: useVelocity ? '1.10' : '' }
        ];
      }
      if (type === 'triset') {
        const trio = [primary, patterns[1] || 'hinge', 'core'];
        return trio.map((pat, i) => ({
          id: label(i),
          pattern: pat,
          exercise: pickExercise(pat, blockNumber + i),
          reps: pat === 'power' ? '3–5 (explosive)' : repText,
          sets: '3–4',
          rounds: '',
          restSets: rest,
          restRounds: '',
          vt: useVelocity ? (pat === 'power' ? '1.00' : '0.75') : ''
        }));
      }
      if (type === 'contrast') {
        return [
          { id: label(0), pattern: primary, exercise: pickExercise(primary, blockNumber), reps: '3–5 (þungt)', sets: '3–4', rounds: '', restSets: rest, restRounds: '', vt: useVelocity ? '0.65' : '' },
          { id: label(1), pattern: primary, exercise: pickExercise(primary, blockNumber + 1), reps: '3–6 (sprengikraftur)', sets: '3–4', rounds: '', restSets: rest, restRounds: '', vt: useVelocity ? '1.00' : '' }
        ];
      }
      // superset (default)
      const duo = [primary, patterns[1] || 'hinge'];
      return duo.map((pat, i) => ({
        id: label(i),
        pattern: pat,
        exercise: pickExercise(pat, blockNumber + i),
        reps: repText,
        sets: '3–4',
        rounds: '',
        restSets: rest,
        restRounds: '',
        vt: useVelocity ? (pat === 'power' ? '1.00' : '0.75') : ''
      }));
    }

    function addBuilderProgramOption(key, name, days) {
      programAllowedDays[key] = [days];
      const existing = Array.from(programSelect.options).find(opt => opt.value === key);
      if (!existing) {
        const opt = document.createElement('option');
        opt.value = key;
        opt.textContent = name;
        programSelect.appendChild(opt);
      }
    }

    function createBuilderSections(key, name, days, velocityOn) {
      const info = document.createElement('section');
      info.dataset.program = key;
      const h2 = document.createElement('h2');
      h2.textContent = `${name} – yfirlit`;
      info.appendChild(h2);
      builderProgramsContainer.appendChild(info);

      for (let d = 1; d <= days; d += 1) {
        const section = document.createElement('section');
        section.dataset.program = `${key}-day${d}`;
        const h = document.createElement('h2');
        h.textContent = `Dagur ${d}`;
        section.appendChild(h);
        const table = document.createElement('table');
        table.className = 'program-table';
        const thead = document.createElement('thead');
        thead.innerHTML = `
          <tr>
            <th>#</th>
            <th>Pattern</th>
            <th>Exercise</th>
            <th>Reps</th>
            <th>Sets</th>
            ${velocityOn ? '<th>Velocity Target</th><th>Velocity Drop Off</th><th>Velocity Cut Off</th>' : ''}
            <th>Rounds</th>
            <th>Rest between sets</th>
            <th>Rest between rounds</th>
          </tr>`;
        table.appendChild(thead);
        const tbody = document.createElement('tbody');
        const bodyId = `${key}-day${d}-body`;
        tbody.id = bodyId;
        table.appendChild(tbody);
        section.appendChild(table);
        builderProgramsContainer.appendChild(section);
        bodyIdByProgram[`${key}-day${d}`] = bodyId;
      }
    }

    function renderBuilderTables(key, days, showVelocity = false) {
      for (let d = 1; d <= days; d += 1) {
        renderRoundsTable(`${key}-day${d}`, `${key}-day${d}-body`, { showVelocity });
      }
    }


    function populateVariants() {
      const chosen = select.value;
      const options = variantOptions[chosen] || [];
      variantSelect.innerHTML = '';
      if (options.length === 0) {
        variantRow.style.display = 'none';
        variantSelect.disabled = true;
      } else {
        variantRow.style.display = 'block';
        variantSelect.disabled = false;
        options.forEach((opt, idx) => {
          const o = document.createElement('option');
          o.value = opt.value;
          o.textContent = opt.label;
          if (idx === 0) o.selected = true;
          variantSelect.appendChild(o);
        });
      }
    }

    function updateVisibleSections() {
      const chosen = select.value;
      const variant = variantSelect.disabled ? '' : variantSelect.value;
      sections.forEach(section => {
        const matchesStructure = section.dataset.structure === chosen;
        const matchesVariant = variantSelect.disabled || !section.dataset.variant || section.dataset.variant === variant;
        section.classList.toggle('hidden', !(matchesStructure && matchesVariant));
      });
    }

    function updateFocusSections() {
      const chosenFocus = focusSelect.value;
      renderExerciseChecklist(chosenFocus);
      focusSections.forEach(section => {
        section.classList.toggle('hidden', section.dataset.focus !== chosenFocus);
      });
    }

    function updateProgramSections() {
      const chosenCategory = programSelect.value;

      programRow.classList.remove('hidden');
      programSelect.disabled = false;

      getProgramSections().forEach(section => {
        const program = section.dataset.program;
        let matches = false;

        if (chosenCategory === 'contrast1') {
          matches = ['push', 'pull', 'combo', 'schedule4'].includes(program);
        } else if (chosenCategory === 'french') {
          matches = ['french-lower', 'french-upper', 'french-hinge', 'french-pull', 'scheduleFrench2', 'scheduleFrench3', 'scheduleFrench4', 'french-guidelines'].includes(program);
        } else if (chosenCategory === 'french-4day-new') {
          matches = ['french4-lower', 'french4-upper', 'french4-hinge', 'french4-pull', 'scheduleFrench4b', 'french-guidelines'].includes(program);
        } else if (chosenCategory === 'contrast-lower') {
          matches = ['contrast-lower-1', 'contrast-lower-2', 'contrast-lower-3', 'contrast-lower-4', 'scheduleContrastLower4'].includes(program);
        } else if (chosenCategory === 'potentiation') {
          matches = ['pot-schedule', 'pot-day-a', 'pot-day-b', 'pot-day-c'].includes(program);
        } else if (chosenCategory === 'pot-cluster') {
          matches = ['pot-cluster-2-schedule', 'pot-cluster-4-schedule', 'pot-cluster-day1', 'pot-cluster-day2'].includes(program);
        } else if (chosenCategory === 'french-rotational') {
          matches = ['scheduleFrenchRot', 'french-rot-day1', 'french-rot-day2', 'french-rot-day3'].includes(program);
        } else if (chosenCategory === 'contrast-velocity') {
          matches = ['cv-schedule', 'cv-day1', 'cv-day2', 'cv-day3', 'cv-day4'].includes(program);
        } else if (chosenCategory === 'contrast-football-4day') {
          matches = ['contrast-football-schedule', 'contrast-football-day1', 'contrast-football-day2', 'contrast-football-day3', 'contrast-football-day4'].includes(program);
        } else if (chosenCategory === 'hybrid-4day') {
          matches = ['hybrid-schedule', 'hybrid-day1', 'hybrid-day2', 'hybrid-day3', 'hybrid-day4'].includes(program);
        } else if (chosenCategory === 'accel-power-4day') {
          matches = ['accel-power-schedule', 'accel-power-day1', 'accel-power-day2', 'accel-power-day3', 'accel-power-day4'].includes(program);
        } else if (chosenCategory === 'lower-3day') {
          matches = ['lower3-schedule', 'lower3-day1', 'lower3-day2', 'lower3-day3'].includes(program);
        } else if (chosenCategory === 'contrast-2day') {
          matches = ['contrast-2day-schedule', 'contrast-2day-1', 'contrast-2day-2'].includes(program);
        } else if (chosenCategory === 'contrast-custom-4day') {
          matches = ['contrast-custom-schedule', 'contrast-custom-day1', 'contrast-custom-day2', 'contrast-custom-day3', 'contrast-custom-day4'].includes(program);
        } else if (chosenCategory === 'iso-contrast-3day') {
          matches = ['iso-contrast-schedule', 'iso-contrast-day1', 'iso-contrast-day2', 'iso-contrast-day3'].includes(program);
        } else if (chosenCategory === 'iso-contrast-4day') {
          matches = ['iso-contrast-4day-schedule', 'iso-contrast-4day-1', 'iso-contrast-4day-2', 'iso-contrast-4day-3', 'iso-contrast-4day-4'].includes(program);
        } else if (chosenCategory === 'french-iso3-pima') {
          matches = ['french-iso3-schedule', 'french-iso3-day1', 'french-iso3-day2', 'french-iso3-day3'].includes(program);
        } else if (chosenCategory && chosenCategory.startsWith('builder-')) {
          matches = program === chosenCategory || program.startsWith(`${chosenCategory}-day`);
        }

        section.classList.toggle('hidden', !matches);
      });
    }

    function updateProgramOptions() {
      const days = daysSelect.value;
      const opts = Array.from(programSelect.options);
      let firstVisible = null;
      opts.forEach(opt => {
        if (!opt.value) { opt.hidden = false; return; }
        const allowed = programAllowedDays[opt.value];
        if (!days) {
          opt.hidden = false;
          opt.style.display = '';
          return;
        }
        const allow = allowed && allowed.includes(Number(days));
        opt.hidden = !allow;
        opt.style.display = allow ? '' : 'none';
        if (allow && !firstVisible) firstVisible = opt.value;
      });
      const currentAllowed = programAllowedDays[programSelect.value];
      if (programSelect.value && days && currentAllowed && !currentAllowed.includes(Number(days))) {
        programSelect.value = '';
      }
      // Auto-select first visible if nothing is chosen after filtering
      if (!programSelect.value && firstVisible) {
        programSelect.value = firstVisible;
      }
      updateProgramSections();
    }

    function renderExerciseChecklist(focus) {
      exerciseOptions.innerHTML = '';
      if (!focus || !exerciseByFocus[focus]) {
        exerciseChecklist.classList.add('hidden');
        return;
      }
      exerciseByFocus[focus].forEach((name, idx) => {
        const id = `exercise-${focus}-${idx}`;
        const wrapper = document.createElement('label');
        wrapper.style.display = 'block';
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.id = id;
        checkbox.value = name;
        const text = document.createTextNode(` ${name}`);
        wrapper.appendChild(checkbox);
        wrapper.appendChild(text);
        exerciseOptions.appendChild(wrapper);
      });
      exerciseChecklist.classList.remove('hidden');
    }

    function createExerciseSelect(value, pattern) {
      const select = document.createElement('select');
      const opts = patternOptions[pattern] || exerciseOptionsMaster;
      opts.forEach(opt => {
        const option = document.createElement('option');
        option.value = opt;
        option.textContent = opt;
        if (opt === value) option.selected = true;
        select.appendChild(option);
      });
      if (!opts.includes(value)) {
        const option = document.createElement('option');
        option.value = value;
        option.textContent = value;
        option.selected = true;
        select.appendChild(option);
      }
      return select;
    }

    function createVideoButton(name) {
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.textContent = '▶';
      btn.title = 'View video';
      btn.style.marginLeft = '0.3rem';
      btn.style.padding = '0.2rem 0.35rem';
      btn.style.fontSize = '0.85rem';
      btn.style.background = '#2b7';
      btn.style.color = '#fff';
      btn.style.borderRadius = '4px';
      btn.style.lineHeight = '1';
      btn.className = 'no-print';
      const link = getVideoLink(name);
      if (!link) btn.style.display = 'none';
      btn.addEventListener('click', () => {
        const url = getVideoLink(btn.dataset.videoName);
        if (!url) return;
        window.open(url, '_blank', 'noopener');
      });
      btn.dataset.videoName = name || '';
      return btn;
    }

    function createPatternSelect(value) {
      const select = document.createElement('select');
      const opts = Object.keys(patternOptions);
      opts.forEach(opt => {
        const option = document.createElement('option');
        option.value = opt;
        option.textContent = opt;
        if (opt === value) option.selected = true;
        select.appendChild(option);
      });
      if (!opts.includes(value)) {
        const option = document.createElement('option');
        option.value = value || '';
        option.textContent = value || 'Veldu mynstur';
        option.selected = true;
        select.appendChild(option);
      }
      return select;
    }

    function createVelocitySelect(value) {
      const select = document.createElement('select');
      velocityOptions.forEach(opt => {
        const option = document.createElement('option');
        option.value = opt;
        option.textContent = opt;
        if (opt === value) option.selected = true;
        select.appendChild(option);
      });
      if (!velocityOptions.includes(value)) {
        const option = document.createElement('option');
        option.value = value;
        option.textContent = value || 'Custom';
        option.selected = true;
        select.appendChild(option);
      }
      return select;
    }

    function createDropSelect(value) {
      const select = document.createElement('select');
      dropOptions.forEach(opt => {
        const option = document.createElement('option');
        option.value = opt;
        option.textContent = opt;
        if (opt === value) option.selected = true;
        select.appendChild(option);
      });
      if (!dropOptions.includes(value)) {
        const option = document.createElement('option');
        option.value = value;
        option.textContent = value || 'Custom';
        option.selected = true;
        select.appendChild(option);
      }
      return select;
    }

    function createCellInput(row, field, width = '100%') {
      const input = document.createElement('input');
      input.type = 'text';
      input.value = row[field] || '';
      input.style.width = width;
      input.addEventListener('input', () => {
        row[field] = input.value;
      });
      return input;
    }

    function renderProgramTable(key, targetId) {
      const tbody = document.getElementById(targetId);
      tbody.innerHTML = '';
      const list = programState[key] || [];
      list.forEach((row, idx) => {
        const tr = document.createElement('tr');
        const tdId = document.createElement('td');
        const idInput = document.createElement('input');
        idInput.type = 'text';
        idInput.value = row.id || '';
        idInput.style.width = '55px';
        idInput.addEventListener('input', () => {
          row.id = idInput.value;
        });
        tdId.appendChild(idInput);
        tr.appendChild(tdId);

        const tdPattern = document.createElement('td');
        const patternSelect = createPatternSelect(row.pattern);
        patternSelect.addEventListener('change', () => {
          row.pattern = patternSelect.value;
          renderProgramTable(key, targetId);
        });
        tdPattern.appendChild(patternSelect);
        tr.appendChild(tdPattern);

        const selectEl = createExerciseSelect(row.exercise, row.pattern);
        const videoBtn = createVideoButton(row.exercise);
        const tdExercise = document.createElement('td');
        const updateVideoBtn = () => {
          const link = getVideoLink(selectEl.value);
          videoBtn.style.display = link ? 'inline-block' : 'none';
          videoBtn.dataset.videoName = selectEl.value;
        };
        selectEl.addEventListener('change', () => {
          row.exercise = selectEl.value;
          updateVideoBtn();
        });
        tdExercise.appendChild(selectEl);
        tdExercise.appendChild(videoBtn);
        updateVideoBtn();
        tr.appendChild(tdExercise);

        let vSelectRef = null;
        let dSelectRef = null;
        let cutTdRef = null;
        let dropTdRef = null;

        ['reps','sets','vt','cut','drop','percent','restSet'].forEach(field => {
          const td = document.createElement('td');
          if (field === 'vt') {
            const vSelect = createVelocitySelect(row[field]);
            vSelectRef = vSelect;
            vSelect.addEventListener('change', () => {
              row.vt = vSelect.value;
            });
            td.appendChild(vSelect);
          } else if (field === 'drop') {
            const dSelect = createDropSelect(row[field]);
            dSelectRef = dSelect;
            dSelect.addEventListener('change', () => {
              row.drop = dSelect.value;
            });
            td.appendChild(dSelect);
            dropTdRef = td;
        } else if (field === 'cut') {
          cutTdRef = td;
        } else {
          let w = '90px';
          if (field === 'reps' || field === 'sets') w = '70px';
          if (field === 'percent') w = '70px';
          td.appendChild(createCellInput(row, field, w));
        }
        tr.appendChild(td);
      });

        const mkBtn = (label, bg, handler) => {
          const b = document.createElement('button');
          b.type = 'button';
          b.textContent = label;
          b.style.background = bg;
          b.style.color = '#fff';
          b.style.padding = '0.3rem 0.45rem';
          b.style.borderRadius = '4px';
          b.style.marginRight = '0.25rem';
          b.addEventListener('click', handler);
          return b;
        };
        const insertDefaults = { id: '', pattern: '', exercise: '', reps: '', sets: '', vt: 'Fast as possible', cut: '', drop: 'Speed decreases', percent: '', restSet: '' };

        const tdDel = document.createElement('td');
        tdDel.className = 'no-print';
        tdDel.appendChild(mkBtn('Eyða', '#c00', () => {
          list.splice(idx, 1);
          renderProgramTable(key, targetId);
        }));
        tr.appendChild(tdDel);

        const tdAdd = document.createElement('td');
        tdAdd.className = 'no-print';
        tdAdd.appendChild(mkBtn('+↑', '#0a7', () => {
          list.splice(idx, 0, { ...insertDefaults });
          renderProgramTable(key, targetId);
        }));
        tdAdd.appendChild(mkBtn('+↓', '#0a7', () => {
          list.splice(idx + 1, 0, { ...insertDefaults });
          renderProgramTable(key, targetId);
        }));
        tr.appendChild(tdAdd);

        function updateCut() {
          const vVal = vSelectRef ? parseFloat(vSelectRef.value) : NaN;
          const dVal = dSelectRef && dSelectRef.value ? parseFloat(dSelectRef.value.replace('%','')) : NaN;
          if (!Number.isNaN(vVal) && !Number.isNaN(dVal)) {
            const factor = 1 - dVal / 100;
            cutTdRef.textContent = (vVal * factor).toFixed(2);
          } else {
            cutTdRef.textContent = row.cut || '';
          }
        }

        updateCut();
        if (vSelectRef) vSelectRef.addEventListener('change', updateCut);
        if (dSelectRef) dSelectRef.addEventListener('change', updateCut);

        function updateCutCell() {
          const vtVal = parseFloat(row.vt || '');
          const dropVal = parseFloat(row.drop || '');
          const cutCell = tr.querySelector('[data-cut-cell]');
          if (!Number.isNaN(vtVal) && !Number.isNaN(dropVal) && dropVal > 0) {
            const cut = (vtVal / dropVal).toFixed(2);
            row.cut = cut;
            if (cutCell) cutCell.textContent = cut;
          } else if (cutCell) {
            cutCell.textContent = row.cut || '';
          }
        }
        updateCutCell();
        tbody.appendChild(tr);
      });
    }

    function renderRoundsTable(key, targetId, { showRounds = true, showVelocity = false } = {}) {
      const tbody = document.getElementById(targetId);
      tbody.innerHTML = '';
      const list = programState[key] || [];
      list.forEach((row, idx) => {
        if (showVelocity) {
          row.vt = row.vt || '0.75';
          row.drop = row.drop || '1.10';
        }
        const tr = document.createElement('tr');

        const tdId = document.createElement('td');
        const idInput = document.createElement('input');
        idInput.type = 'text';
        idInput.value = row.id || '';
        idInput.style.width = '55px';
        idInput.addEventListener('input', () => row.id = idInput.value);
        tdId.appendChild(idInput);
        tr.appendChild(tdId);

        const tdPattern = document.createElement('td');
        const patternSelect = createPatternSelect(row.pattern);
        patternSelect.addEventListener('change', () => {
          row.pattern = patternSelect.value;
          renderRoundsTable(key, targetId);
        });
        tdPattern.appendChild(patternSelect);
        tr.appendChild(tdPattern);

        const tdExercise = document.createElement('td');
        const selectEl = createExerciseSelect(row.exercise, row.pattern);
        const videoBtn = createVideoButton(row.exercise);
        const updateVideoBtn = () => {
          const link = getVideoLink(selectEl.value);
          videoBtn.style.display = link ? 'inline-block' : 'none';
          videoBtn.dataset.videoName = selectEl.value;
        };
        selectEl.addEventListener('change', () => {
          row.exercise = selectEl.value;
          updateVideoBtn();
        });
        tdExercise.appendChild(selectEl);
        tdExercise.appendChild(videoBtn);
        updateVideoBtn();
        tr.appendChild(tdExercise);

        const fields = [];
        fields.push('reps');
        fields.push('sets');
        if (showVelocity) {
          fields.push('vt');
          fields.push('drop');
          fields.push('cut');
        }
        if (showRounds) fields.push('rounds');
        fields.push('restSets');
        fields.push('restRounds');
        fields.forEach(field => {
          const td = document.createElement('td');
          if (field === 'vt') {
            const sel = document.createElement('select');
            const options = Array.from({ length: Math.floor((1.30 - 0.15) / 0.05) + 1 }, (_, i) => (0.15 + i * 0.05).toFixed(2));
            options.forEach(val => {
              const opt = document.createElement('option');
              opt.value = val;
              opt.textContent = val;
              sel.appendChild(opt);
            });
            sel.value = row.vt || '0.75';
            row.vt = sel.value;
            sel.style.width = '90px';
            sel.addEventListener('change', () => { row.vt = sel.value; updateCutCell(); });
            td.appendChild(sel);
          } else if (field === 'drop') {
            const sel = document.createElement('select');
            const options = Array.from({ length: ((1.40 - 1.05) / 0.05) + 1 }, (_, i) => (1.05 + i * 0.05).toFixed(2));
            options.unshift('N/A');
            options.forEach(val => {
              const opt = document.createElement('option');
              opt.value = val;
              opt.textContent = val === 'N/A' ? 'N/A' : `${val} (${((parseFloat(val) - 1) * 100).toFixed(0)}%)`;
              sel.appendChild(opt);
            });
            sel.value = row.drop || '1.10';
            row.drop = sel.value;
            sel.addEventListener('change', () => { row.drop = sel.value; updateCutCell(); });
            sel.style.width = '90px';
            td.appendChild(sel);
          } else if (field === 'cut') {
            td.textContent = row.cut || '';
            td.dataset.cutCell = 'true';
            td.style.minWidth = '90px';
          } else {
            const w = (field === 'reps' || field === 'sets') ? '70px' : '90px';
            td.appendChild(createCellInput(row, field, w));
          }
          tr.appendChild(td);
        });

        const mkBtn = (label, bg, handler) => {
          const b = document.createElement('button');
          b.type = 'button';
          b.textContent = label;
          b.style.background = bg;
          b.style.color = '#fff';
          b.style.padding = '0.3rem 0.45rem';
          b.style.borderRadius = '4px';
          b.style.marginRight = '0.25rem';
          b.addEventListener('click', handler);
          return b;
        };
        const insertDefaults = { id: '', pattern: '', exercise: '', reps: '', sets: '', rounds: '', restSets: '', restRounds: '' };

        const tdDel = document.createElement('td');
        tdDel.className = 'no-print';
        tdDel.appendChild(mkBtn('Eyða', '#c00', () => {
          list.splice(idx, 1);
          renderRoundsTable(key, targetId);
        }));
        tr.appendChild(tdDel);

        const tdAdd = document.createElement('td');
        tdAdd.className = 'no-print';
        tdAdd.appendChild(mkBtn('+↑', '#0a7', () => {
          list.splice(idx, 0, { ...insertDefaults });
          renderRoundsTable(key, targetId);
        }));
        tdAdd.appendChild(mkBtn('+↓', '#0a7', () => {
          list.splice(idx + 1, 0, { ...insertDefaults });
          renderRoundsTable(key, targetId);
        }));
        tr.appendChild(tdAdd);

        tbody.appendChild(tr);
      });
    }

    function renderAllTables() {
      renderProgramTable('push', 'push-body');
      renderProgramTable('pull', 'pull-body');
      renderProgramTable('combo', 'combo-body');
      renderProgramTable('french-lower', 'french-lower-body');
      renderProgramTable('french-upper', 'french-upper-body');
      renderProgramTable('french-hinge', 'french-hinge-body');
      renderProgramTable('french-pull', 'french-pull-body');
      renderProgramTable('french4-lower', 'french4-lower-body');
      renderProgramTable('french4-upper', 'french4-upper-body');
      renderProgramTable('french4-hinge', 'french4-hinge-body');
      renderProgramTable('french4-pull', 'french4-pull-body');
      renderProgramTable('contrast-lower-1', 'contrast-lower-1-body');
      renderProgramTable('contrast-lower-2', 'contrast-lower-2-body');
      renderProgramTable('contrast-lower-3', 'contrast-lower-3-body');
      renderProgramTable('contrast-lower-4', 'contrast-lower-4-body');
      renderProgramTable('pot-day-a', 'pot-day-a-body');
      renderProgramTable('pot-day-b', 'pot-day-b-body');
      renderProgramTable('pot-day-c', 'pot-day-c-body');
      renderProgramTable('pot-cluster-day1', 'pot-cluster-day1-body');
      renderProgramTable('pot-cluster-day2', 'pot-cluster-day2-body');
      renderProgramTable('french-rot-day1', 'french-rot-day1-body');
      renderProgramTable('french-rot-day2', 'french-rot-day2-body');
      renderProgramTable('french-rot-day3', 'french-rot-day3-body');
      renderProgramTable('contrast-2day-1', 'contrast-2day-1-body');
      renderProgramTable('contrast-2day-2', 'contrast-2day-2-body');
      renderProgramTable('contrast-custom-day1', 'contrast-custom-day1-body');
      renderProgramTable('contrast-custom-day2', 'contrast-custom-day2-body');
      renderProgramTable('contrast-custom-day3', 'contrast-custom-day3-body');
      renderProgramTable('contrast-custom-day4', 'contrast-custom-day4-body');
      renderProgramTable('iso-contrast-day1', 'iso-contrast-day1-body');
      renderProgramTable('iso-contrast-day2', 'iso-contrast-day2-body');
      renderProgramTable('iso-contrast-day3', 'iso-contrast-day3-body');
      renderProgramTable('iso-contrast-4day-1', 'iso-contrast-4day-1-body');
      renderProgramTable('iso-contrast-4day-2', 'iso-contrast-4day-2-body');
      renderProgramTable('iso-contrast-4day-3', 'iso-contrast-4day-3-body');
      renderProgramTable('iso-contrast-4day-4', 'iso-contrast-4day-4-body');
      renderProgramTable('french-iso3-day1', 'french-iso3-day1-body');
      renderProgramTable('french-iso3-day2', 'french-iso3-day2-body');
      renderProgramTable('french-iso3-day3', 'french-iso3-day3-body');
      renderProgramTable('contrast-football-day1', 'contrast-football-day1-body');
      renderProgramTable('contrast-football-day2', 'contrast-football-day2-body');
      renderProgramTable('contrast-football-day3', 'contrast-football-day3-body');
      renderProgramTable('contrast-football-day4', 'contrast-football-day4-body');
      renderRoundsTable('cv-day1', 'cv-day1-body');
      renderRoundsTable('cv-day2', 'cv-day2-body');
      renderRoundsTable('cv-day3', 'cv-day3-body');
      renderRoundsTable('cv-day4', 'cv-day4-body');
      renderRoundsTable('lower3-day1', 'lower3-day1-body');
      renderRoundsTable('lower3-day2', 'lower3-day2-body');
      renderRoundsTable('lower3-day3', 'lower3-day3-body');
      renderRoundsTable('hybrid-day1', 'hybrid-day1-body', { showRounds: false });
      renderRoundsTable('hybrid-day2', 'hybrid-day2-body', { showRounds: false });
      renderRoundsTable('hybrid-day3', 'hybrid-day3-body', { showRounds: false });
      renderRoundsTable('hybrid-day4', 'hybrid-day4-body', { showRounds: false });
      renderRoundsTable('accel-power-day1', 'accel-power-day1-body', { showRounds: false });
      renderRoundsTable('accel-power-day2', 'accel-power-day2-body', { showRounds: false });
      renderRoundsTable('accel-power-day3', 'accel-power-day3-body', { showRounds: false });
      renderRoundsTable('accel-power-day4', 'accel-power-day4-body', { showRounds: false });
    }

    function createBuilderProgram() {
      if (!builderCreateBtn) return;
      const name = (builderNameInput.value || '').trim() || 'Builder Program';
      const days = Number(builderDaysSelect.value || 3);
      const useVelocity = builderVelocityColumnSelect && builderVelocityColumnSelect.value === 'yes';
      const selectedPatterns = [];
      const key = `builder-${Date.now()}`;
      const dayConfigs = [];
      for (let d = 1; d <= days; d += 1) {
        const methodSel = document.getElementById(`builderMethod-${d}`);
        const templateSel = document.getElementById(`builderTemplate-${d}`);
        const rawTemplate = templateSel ? templateSel.value : 'template:pull-push';
        let templateKey = 'pull-push';
        let patternKey = '';
        if (rawTemplate.startsWith('pattern:')) {
          patternKey = rawTemplate.split(':')[1] || '';
        } else if (rawTemplate.startsWith('template:')) {
          templateKey = rawTemplate.split(':')[1] || 'pull-push';
        } else {
          templateKey = rawTemplate || 'pull-push';
        }
        const methods = [];
        const methodBlocks = document.querySelectorAll(`#builderMethods-${d} [data-method-index]`);
        if (methodBlocks.length === 0) {
          methods.push({ method: methodSel ? methodSel.value : 'superset', template: templateKey, pattern: patternKey });
        } else {
          methodBlocks.forEach(node => {
            const mSel = node.querySelector('select[data-method]');
            const tSel = node.querySelector('select[data-template]');
            const raw = tSel ? tSel.value : 'template:pull-push';
            let tKey = 'pull-push';
            let pKey = '';
            if (raw.startsWith('pattern:')) pKey = raw.split(':')[1] || '';
            else if (raw.startsWith('template:')) tKey = raw.split(':')[1] || 'pull-push';
            else tKey = raw || 'pull-push';
            methods.push({ method: mSel ? mSel.value : 'superset', template: tKey, pattern: pKey });
          });
        }
        dayConfigs.push({ methods });
      }

      addBuilderProgramOption(key, name, days);
      createBuilderSections(key, name, days, useVelocity);

      for (let d = 1; d <= days; d += 1) {
        const cfg = dayConfigs[d - 1] || dayConfigs[0];
        const blocks = [];
        let blockIdx = 1;
        const methods = cfg.methods && cfg.methods.length ? cfg.methods : [{ method: 'superset', template: 'pull-push', pattern: '' }];
        methods.forEach(cfgMethod => {
          if (cfgMethod.method === 'single') {
            const primary = cfgMethod.pattern || 'squat';
            blocks.push({
              id: `${blockIdx}A`,
              pattern: primary,
              exercise: pickExercise(primary, blockIdx),
              reps: '6–10',
              sets: '3–4',
              rounds: '',
              restSets: '60–90s',
              restRounds: '',
              vt: useVelocity ? '0.75' : ''
            });
            blockIdx += 1;
          } else {
            const type = cfgMethod.method === 'french' ? 'giant' : cfgMethod.method;
            const rows = buildBlockRows(type, blockIdx, cfgMethod.template, useVelocity, cfgMethod.pattern);
            blocks.push(...rows);
            blockIdx += 1;
          }
        });
        programState[`${key}-day${d}`] = blocks.length ? blocks : [createEmptyRoundRow()];
      }
        renderBuilderTables(key, days, useVelocity);

      daysSelect.value = String(days);
      updateProgramOptions();
      programSelect.value = key;
      updateProgramSections();

      builderStatus.textContent = `Bætti við ${name} (${days} dagar) með stilltum superset/triset/french/contrast blokkum.`;
      builderStatus.style.color = '#0a7';
      builderProgramsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    select.addEventListener('change', () => {
      populateVariants();
      updateVisibleSections();
    });
    variantSelect.addEventListener('change', updateVisibleSections);
    focusSelect.addEventListener('change', updateFocusSections);
    programSelect.addEventListener('change', updateProgramSections);
    daysSelect.addEventListener('change', () => {
      // reset selections when days changes
      updateProgramOptions();
      updateProgramSections();
    });
    if (nameInput && printNameValue) {
      const syncName = () => {
        printNameValue.textContent = nameInput.value || '';
      };
      nameInput.addEventListener('input', syncName);
      syncName();
    }
    if (exportBtn) {
      exportBtn.addEventListener('click', () => window.print());
    }
    if (builderCreateBtn) {
      builderCreateBtn.addEventListener('click', createBuilderProgram);
    }

    function renderDayConfigInputs() {
      if (!builderDayConfigs) return;
      const days = Number(builderDaysSelect.value || 3);
      builderDayConfigs.innerHTML = '';
      for (let d = 1; d <= days; d += 1) {
        const wrap = document.createElement('div');
        wrap.className = 'two-col builder-config';

        const label1 = document.createElement('label');
        label1.textContent = `Dagur ${d} – Aðferð:`;
        const methodContainer = document.createElement('div');
        methodContainer.id = `builderMethods-${d}`;
        methodContainer.dataset.day = d;

        const addMethodBlock = () => {
          const idx = methodContainer.childElementCount + 1;
          const block = document.createElement('div');
          block.dataset.methodIndex = idx;
          block.style.display = 'grid';
          block.style.gridTemplateColumns = '1fr 1fr';
          block.style.gap = '0.5rem';
          const mSel = document.createElement('select');
          mSel.dataset.method = 'true';
          ['superset','triset','contrast','french','single'].forEach(val => {
            const opt = document.createElement('option');
            opt.value = val;
            opt.textContent = val === 'single' ? 'Single Exercise' : val.charAt(0).toUpperCase() + val.slice(1);
            mSel.appendChild(opt);
          });
          const tSel = document.createElement('select');
          tSel.dataset.template = 'true';
          Object.keys(builderTemplates).forEach(key => {
            const opt = document.createElement('option');
            opt.value = `template:${key}`;
            opt.textContent = builderTemplateLabels[key] || builderTemplates[key].join(' / ');
            tSel.appendChild(opt);
          });
          ['squat','hinge','push','pull','core','power','PIMA Iso'].forEach(val => {
            const opt = document.createElement('option');
            opt.value = `pattern:${val}`;
            opt.textContent = `Mynstur: ${val}`;
            tSel.appendChild(opt);
          });
          block.appendChild(mSel);
          block.appendChild(tSel);
          methodContainer.appendChild(block);
        };

        addMethodBlock();
        label1.appendChild(methodContainer);

        wrap.appendChild(label1);
        const addBtn = document.createElement('button');
        addBtn.type = 'button';
        addBtn.textContent = 'Bæta við aðferð';
        addBtn.style.padding = '0.5rem 0.9rem';
        addBtn.style.fontSize = '0.95rem';
        addBtn.addEventListener('click', addMethodBlock);
        const addBtnWrap = document.createElement('div');
        addBtnWrap.style.display = 'flex';
        addBtnWrap.style.justifyContent = 'center';
        addBtnWrap.style.marginTop = '0.4rem';
        addBtnWrap.appendChild(addBtn);
        wrap.appendChild(addBtnWrap);
        builderDayConfigs.appendChild(wrap);
      }
    }

    if (builderDaysSelect) {
      builderDaysSelect.addEventListener('change', renderDayConfigInputs);
      renderDayConfigInputs();
    }

    function readSavedPrograms() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        return raw ? JSON.parse(raw) : {};
      } catch (e) {
        return {};
      }
    }

    function writeSavedPrograms(map) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(map));
    }

    function refreshLoadSelect() {
  const loadSelect =
    document.getElementById('loadProgram') ||
    document.getElementById('program-load') ||
    document.querySelector('[data-role="loadProgram"]');

  if (!loadSelect) {
    console.warn('[microdose] refreshLoadSelect: loadSelect missing');
    return;
  }

  const map = readSavedPrograms();
  const current = loadSelect.value;

  loadSelect.innerHTML = '<option value="">— Hlaða prógrammi —</option>';

  Object.keys(map).sort().forEach(name => {
    const opt = document.createElement('option');
    opt.value = name;
    opt.textContent = name;
    if (name === current) opt.selected = true;
    loadSelect.appendChild(opt);
  });
}

    function saveCurrentProgram() {
      const name = (saveNameInput.value || '').trim();
      if (!name) {
        saveStatus.textContent = 'Settu inn nafn til að vista.';
        saveStatus.style.color = '#c00';
        return;
      }
      const map = readSavedPrograms();
      map[name] = {
        programState: JSON.parse(JSON.stringify(programState)),
        structure: select.value,
        variant: variantSelect.value,
        focus: focusSelect.value,
        days: daysSelect.value,
        programCategory: programSelect.value
      };
      writeSavedPrograms(map);
      refreshLoadSelect();
      loadSelect.value = name;
      saveStatus.textContent = 'Vistað.';
      saveStatus.style.color = '#007700';
    }

    function loadProgramByName(name) {
      const map = readSavedPrograms();
      const saved = map[name];
      if (!saved) return;
      programState = JSON.parse(JSON.stringify(saved.programState || {}));
      select.value = saved.structure || select.value;
      populateVariants();
      if (saved.variant && !variantSelect.disabled) {
        variantSelect.value = saved.variant;
      }
      focusSelect.value = saved.focus || '';
      daysSelect.value = saved.days || '';
      updateProgramOptions();
      programSelect.value = saved.programCategory || '';
      updateProgramSections();
      updateVisibleSections();
      updateFocusSections();
      renderAllTables();
      saveStatus.textContent = `Hlaðið: ${name}`;
      saveStatus.style.color = '#007700';
    }

    function deleteProgramByName(name) {
      const map = readSavedPrograms();
      if (!map[name]) return;
      delete map[name];
      writeSavedPrograms(map);
      refreshLoadSelect();
      loadSelect.value = '';
      saveStatus.textContent = `Eytt: ${name}`;
      saveStatus.style.color = '#c00';
    }

    if (saveBtn) {
      saveBtn.addEventListener('click', saveCurrentProgram);
    }
    if (loadSelect) {
      loadSelect.addEventListener('change', () => {
        if (loadSelect.value) {
          loadProgramByName(loadSelect.value);
        }
      });
    }
    if (deleteBtn) {
      deleteBtn.addEventListener('click', () => {
        if (loadSelect.value) deleteProgramByName(loadSelect.value);
      });
    }


    function addActionHeaders() {
      document.querySelectorAll('table.program-table thead tr').forEach(tr => {
        const thDel = document.createElement('th');
        thDel.textContent = 'Eyða';
        thDel.className = 'no-print';
        const thAdd = document.createElement('th');
        thAdd.textContent = 'Bæta við';
        thAdd.className = 'no-print';
        tr.appendChild(thDel);
        tr.appendChild(thAdd);
      });
    }

    populateVariants();
    updateVisibleSections();
    updateFocusSections();
    addActionHeaders();
    updateProgramOptions();
    renderAllTables();
    refreshLoadSelect();
    updateProgramSections();

  const playerSelectEl = document.getElementById('playerSelect');
  const athleteNameInput = document.getElementById('athleteName');
  if (playerSelectEl && athleteNameInput) {
    playerSelectEl.addEventListener('change', () => {
      if (playerSelectEl.value && playerSelectEl.value !== 'Custom') {
        athleteNameInput.value = playerSelectEl.value;
      }
      athleteNameInput.dispatchEvent(new Event('change'));
    });
    athleteNameInput.addEventListener('input', () => {
      if (playerSelectEl.value && playerSelectEl.value !== athleteNameInput.value) {
        playerSelectEl.value = '';
      }
    });
  }

  if (playerSelectEl) {
    playerSelectEl.value = '';
  }
</script>

<!-- 1️⃣ Supabase config (VERÐUR að vera á undan JS) -->
<script>
  window.__SUPABASE_URL__ = "https://tbtkxttiwbdmugjivmvb.supabase.co";
  window.__SUPABASE_ANON_KEY__ = "sb_publishable_7ePvUt_6A7KKyGpV7eYfaQ_3w81AUuA";
</script>

<!-- 2️⃣ Supabase client + API -->
<script type="module" src="./assets/dataClient.js"></script>

<!-- 3️⃣ Auth + Team selector -->
<script type="module" src="./assets/app-auth.js"></script>

<script type="module" src="./assets/roster-supabase.js"></script>

<!-- 4️⃣ Microdose kerfið þitt -->
<script type="module" src="./assets/microdose-ui.js"></script>


</body>
</html>
